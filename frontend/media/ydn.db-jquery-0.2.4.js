
                (function($) {
            (function(){function k(a){throw a;}var l=void 0,n=!0,r=null,s=!1;function aa(){return function(){}}function t(a){return function(){return this[a]}}function ba(a){return function(){return a}}var u,w=this;function da(a){a=a.split(".");for(var b=w,c;c=a.shift();)if(b[c]!=r)b=b[c];else return r;return b}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function x(a){return a!==l}function y(a){return"array"==ea(a)}function fa(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function z(a){return"string"==typeof a}function ga(a){return"boolean"==typeof a}function A(a){return"number"==typeof a}function B(a){return"function"==ea(a)}function C(a){var b=typeof a;return"object"==b&&a!=r||"function"==b}function ha(a){return a[ia]||(a[ia]=++ja)}
var ia="closure_uid_"+(1E9*Math.random()>>>0),ja=0;function ka(a,b,c){return a.call.apply(a.bind,arguments)}function la(a,b,c){a||k(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ma(a,b,c){ma=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ka:la;return ma.apply(r,arguments)}function na(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var oa=Date.now||function(){return+new Date};
function D(a,b){var c=a.split("."),d=w;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&x(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function F(a,b){function c(){}c.prototype=b.prototype;a.ha=b.prototype;a.prototype=new c};function pa(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;Object.freeze&&Object.freeze(this)}pa.prototype.lower=l;pa.prototype.upper=l;pa.prototype.toJSON=function(){return qa(this)};function ra(a,b,c,d){return new pa(a,b,c,d)}function sa(a){var b;y(a)?(b=ta(G(a)),b.push("\uffff")):z(a)?b=a+"\uffff":k(new I);return ra(a,b,s,n)}function qa(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}
function ua(a){return a==r?r:a instanceof va?a:a.upper!=r&&a.lower!=r?va.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):a.upper!=r?va.upperBound(a.upper,a.upperOpen):a.lower!=r?va.lowerBound(a.lower,a.lowerOpen):r}function wa(a){if(a instanceof pa)return"";if(a!=r){if(C(a)){for(var b in a)if(a.hasOwnProperty(b)&&!(0<=xa(["lower","upper","lowerOpen","upperOpen"],b)))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
function za(a,b,c,d){var e,f,g,h;if("^"==a)return sa(b);"<"==a||"<="==a?(e=b,g="<"==a):">"==a||">="==a?(f=b,h=">"==a):"="==a||"=="==a?e=f=b:k(new I("invalid op: "+a));"<"==c||"<="==c?(e=d,g="<"==c):">"==c||">="==c?(f=d,h=">"==c):x(c)&&k(new I("invalid op2: "+c));return ra(f,e,h,g)}var va=w.IDBKeyRange||w.webkitIDBKeyRange||pa;function Aa(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function Ba(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function Ca(a){if(!Ea.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ga,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ha,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ia,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ja,"&quot;"));return a}var Ga=/&/g,Ha=/</g,Ia=/>/g,Ja=/\"/g,Ea=/[&<>\"]/;
function Ka(a){return Ba(a.replace(/  /g," &#160;"),l)}function La(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Ma={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Na={"'":"\\'"};
function K(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,h;if(!(h=Ma[d])){if(!(31<e&&127>e))if(d in Na)d=Na[d];else if(d in Ma)d=Na[d]=Ma[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=Na[d]=e}h=d}f[g]=h}b.push('"');return b.join("")};function Oa(a){Error.captureStackTrace?Error.captureStackTrace(this,Oa):this.stack=Error().stack||"";a&&(this.message=String(a))}F(Oa,Error);Oa.prototype.name="CustomError";function Pa(a,b){b.unshift(a);Oa.call(this,Aa.apply(r,b));b.shift()}F(Pa,Oa);Pa.prototype.name="AssertionError";function Qa(a,b){k(new Pa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var Ra=Array.prototype,xa=Ra.indexOf?function(a,b,c){return Ra.indexOf.call(a,b,c)}:function(a,b,c){c=c==r?0:0>c?Math.max(0,a.length+c):c;if(z(a))return!z(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Sa=Ra.forEach?function(a,b,c){Ra.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=z(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ta=Ra.map?function(a,b,c){return Ra.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=z(a)?
a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ua=Ra.some?function(a,b,c){return Ra.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=z(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return n;return s};function Wa(a,b){var c=Xa(a,b,l);return 0>c?r:z(a)?a.charAt(c):a[c]}function Xa(a,b,c){for(var d=a.length,e=z(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}
function Ya(a){if(!y(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Za(a,b){var c=xa(a,b);0<=c&&Ra.splice.call(a,c,1)}function $a(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function ab(a,b,c,d){Ra.splice.apply(a,bb(arguments,1))}function bb(a,b,c){return 2>=arguments.length?Ra.slice.call(a,b):Ra.slice.call(a,b,c)}function cb(a,b){return a>b?1:a<b?-1:0};function db(a,b){for(var c=fa(b),d=c?b:arguments,c=c?0:1;c<d.length&&!(a=a[d[c]],!x(a));c++);return a}var eb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<eb.length;f++)c=eb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var gb,hb,ib,jb;function kb(){return w.navigator?w.navigator.userAgent:r}jb=ib=hb=gb=s;var lb;if(lb=kb()){var mb=w.navigator;gb=0==lb.indexOf("Opera");hb=!gb&&-1!=lb.indexOf("MSIE");ib=!gb&&-1!=lb.indexOf("WebKit");jb=!gb&&!ib&&"Gecko"==mb.product}var nb=gb,L=hb,ob=jb,pb=ib;function qb(){var a=w.document;return a?a.documentMode:l}var rb;
a:{var sb="",tb;if(nb&&w.opera)var ub=w.opera.version,sb="function"==typeof ub?ub():ub;else if(ob?tb=/rv\:([^\);]+)(\)|;)/:L?tb=/MSIE\s+([^\);]+)(\)|;)/:pb&&(tb=/WebKit\/(\S+)/),tb)var vb=tb.exec(kb()),sb=vb?vb[1]:"";if(L){var wb=qb();if(wb>parseFloat(sb)){rb=String(wb);break a}}rb=sb}var xb={};
function yb(a){var b;if(!(b=xb[a])){b=0;for(var c=String(rb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",j=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var p=j.exec(g)||["","",""],q=m.exec(h)||["","",""];if(0==p[0].length&&0==q[0].length)break;b=((0==p[1].length?0:parseInt(p[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==p[1].length?0:parseInt(p[1],10))>(0==q[1].length?
0:parseInt(q[1],10))?1:0)||((0==p[2].length)<(0==q[2].length)?-1:(0==p[2].length)>(0==q[2].length)?1:0)||(p[2]<q[2]?-1:p[2]>q[2]?1:0)}while(0==b)}b=xb[a]=0<=b}return b}var zb=w.document,Ab=!zb||!L?l:qb()||("CSS1Compat"==zb.compatMode?parseInt(rb,10):5);function Bb(a){return Cb(a||arguments.callee.caller,[])}
function Cb(a,b){var c=[];if(0<=xa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Db(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Db(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Cb(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Db(a){if(Eb[a])return Eb[a];a=String(a);if(!Eb[a]){var b=/function ([^\(]+)/.exec(a);Eb[a]=b?b[1]:"[Anonymous]"}return Eb[a]}var Eb={};function Fb(a,b,c,d,e){"number"==typeof e||Gb++;this.i=d||oa();this.g=a;this.e=b;this.c=c;delete this.b;delete this.a}Fb.prototype.b=r;Fb.prototype.a=r;var Gb=0;function Hb(a){this.i=a}Hb.prototype.c=r;Hb.prototype.b=r;Hb.prototype.e=r;Hb.prototype.a=r;function Ib(a,b){this.name=a;this.value=b}Ib.prototype.toString=t("name");var Lb=new Ib("SHOUT",1200),Mb=new Ib("SEVERE",1E3),Nb=new Ib("WARNING",900),Ob=new Ib("INFO",800),Pb=new Ib("CONFIG",700),Qb=new Ib("FINE",500),Rb=new Ib("FINER",400),Sb=new Ib("FINEST",300),Tb=[new Ib("OFF",Infinity),Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,new Ib("ALL",0)],Ub=r;
function Vb(a){if(a.b)return a.b;if(a.c)return Vb(a.c);Qa("Root logger has no level set.");return r}Hb.prototype.log=function(a,b,c){if(a.value>=Vb(this).value){a=this.g(a,b,c);b="log:"+a.e;w.console&&(w.console.timeStamp?w.console.timeStamp(b):w.console.markTimeline&&w.console.markTimeline(b));w.msWriteProfilerMark&&w.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=l;f=c.a[e];e++)f(d);b=b.c}}};
Hb.prototype.g=function(a,b,c){var d=new Fb(a,String(b),this.i);if(c){d.b=c;var e;var f=arguments.callee.caller;try{var g;var h=da("window.location.href");if(z(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var j,m,p=s;try{j=c.lineNumber||c.Rc||"Not available"}catch(q){j="Not available",p=n}try{m=c.fileName||c.filename||c.sourceURL||w.$googDebugFname||h}catch(v){m="Not available",p=n}g=p||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,
name:c.name,lineNumber:j,fileName:m,stack:c.stack||"Not available"}:c}e="Message: "+Ca(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+Ca(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ca(Bb(f)+"-> ")}catch(J){e="Exception trying to expose exception! You win, we lose. "+J}d.a=e}return d};function Wb(a,b){a.log(Mb,b,l)}function M(a,b){a.log(Nb,b,l)}function N(a,b){a.log(Rb,b,l)}function O(a,b){a.log(Sb,b,l)}
var Xb={},Yb=r;function Zb(){Yb||(Yb=new Hb(""),Xb[""]=Yb,Yb.b=Pb)}function $b(){Zb();return Yb}function P(a){Zb();var b;if(!(b=Xb[a])){b=new Hb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=P(a.substr(0,c));c.e||(c.e={});c.e[d]=b;b.c=c;Xb[a]=b}return b};var ac=new function(){this.a=oa()};function bc(a){this.e=a||"";this.g=ac}bc.prototype.a=n;bc.prototype.b=s;function cc(a){a=new Date(a.i);return dc(a.getFullYear()-2E3)+dc(a.getMonth()+1)+dc(a.getDate())+" "+dc(a.getHours())+":"+dc(a.getMinutes())+":"+dc(a.getSeconds())+"."+dc(Math.floor(a.getMilliseconds()/10))}function dc(a){return 10>a?"0"+a:String(a)}function fc(a,b){var c=(a.i-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function gc(a){bc.call(this,a)}F(gc,bc);gc.prototype.b=n;
gc.prototype.c=function(a){var b;switch(a.g.value){case Lb.value:b="dbg-sh";break;case Mb.value:b="dbg-sev";break;case Nb.value:b="dbg-w";break;case Ob.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.e," ");this.a&&c.push("[",cc(a),"] ");c.push("[",Ka(fc(a,this.g.a)),"s] ");c.push("[",Ca(a.c),"] ");c.push('<span class="',b,'">',Ba(Ka(Ca(a.e))));this.b&&a.b&&c.push("<br>",Ba(Ka(a.a||"")));c.push("</span><br>");return c.join("")};function hc(a){bc.call(this,a)}F(hc,bc);
hc.prototype.c=function(a){var b=[];b.push(this.e," ");this.a&&b.push("[",cc(a),"] ");b.push("[",fc(a,this.g.a),"s] ");b.push("[",a.c,"] ");b.push(a.e,"\n");this.b&&a.b&&b.push(a.a,"\n");return b.join("")};function ic(){this.g=ma(this.i,this);this.a=new hc;this.a.a=s;this.b=this.a.b=s;this.c="";this.e={}}ic.prototype.i=function(a){if(!this.e[a.c]){var b=this.a.c(a),c=jc;if(c)switch(a.g){case Lb:kc(c,"info",b);break;case Mb:kc(c,"error",b);break;case Nb:kc(c,"warn",b);break;default:kc(c,"debug",b)}else window.opera?window.opera.postError(b):this.c+=b}};var jc=window.console;function kc(a,b,c){if(a[b])a[b](c);else a.log(c)};var lc,mc=!L||L&&9<=Ab;!ob&&!L||L&&L&&9<=Ab||ob&&yb("1.9.1");L&&yb("9");function nc(a,b){var c;c=a.className;c=z(c)&&c.match(/\S+/g)||[];for(var d=bb(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=xa(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var oc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pc(a){this.a=a||w.document||document}function qc(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
pc.prototype.b=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!mc&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',Ca(g.name),'"');if(g.type){f.push(' type="',Ca(g.type),'"');var h={};fb(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=d.createElement(f);if(g)if(z(g))f.className=g;else if(y(g))nc.apply(r,[f].concat(g));else{var j=f,h=function(a,b){"style"==b?j.style.cssText=a:"class"==b?j.className=a:"for"==b?j.htmlFor=a:b in oc?j.setAttribute(oc[b],a):0==b.lastIndexOf("aria-",
0)||0==b.lastIndexOf("data-",0)?j.setAttribute(b,a):j[b]=a},m;for(m in g)h.call(l,g[m],m)}if(2<e.length){var p=d,q=f,d=e,e=function(a){a&&q.appendChild(z(a)?p.createTextNode(a):a)};for(m=2;m<d.length;m++)if(g=d[m],fa(g)&&!(C(g)&&0<g.nodeType)){var h=Sa,v;a:{if((v=g)&&"number"==typeof v.length){if(C(v)){v="function"==typeof v.item||"string"==typeof v.item;break a}if(B(v)){v="function"==typeof v.item;break a}}v=s}h(v?$a(g):g,e)}else e(g)}return f};
pc.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function rc(a){this.g=ma(this.i,this);this.b=new gc;this.c=this.b.a=s;this.a=a;this.e=this.a.ownerDocument||this.a.document;var b=(a=this.a)?new pc(9==a.nodeType?a:a.ownerDocument||a.document):lc||(lc=new pc),c=r;L?(a=c=b.a.createStyleSheet(),L?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"):(a=qc(b,"head")[0],a||(c=qc(b,"body")[0],a=b.b("head"),c.parentNode.insertBefore(a,c)),b=c=b.b("style"),L?b.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
b.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}",a.appendChild(c));this.a.className+=" logdiv"}
rc.prototype.i=function(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.e.createElement("div");c.className="logmsg";c.innerHTML=this.b.c(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)};rc.prototype.clear=function(){this.a.innerHTML=""};var sc=r,tc=r;function I(a){Oa.call(this,a);this.name="ydn.ArgumentException"}F(I,Oa);function uc(a,b,c,d,e){this.a=z(b)?za(b,c,d,e):ua(b);this.ja=a}uc.prototype.ja="";
function vc(a,b,c){var d="",e=[];if(c)if(c==r||c.lower==r||c.upper==r?0:y(c.lower)&&y(c.upper)?c.lower.length==c.upper.length-1&&"\uffff"==c.upper[c.upper.length-1]&&c.lower.every(function(a,b){return a==c.upper[b]}):!c.lowerOpen&&!c.upperOpen&&c.lower.length==c.upper.length+1&&"\uffff"==c.upper[c.lower.length-1])if(z(a)){var f=K(a),d=f+" LIKE ?";e.push(Q(c.lower,b)+"%")}else for(var g=0;g<c.lower.length;g++)0<g&&(d+=" AND "),f=K(a[g]),d+=f+" = ?",e.push(c.lower[g]);else if(c.lower!=r&&c.upper!=r&&
0==R(c.lower,c.upper))if(fa(c.lower))for(g=0;g<c.lower.length;g++)0<g&&(d+=" AND "),f=K(a[g]),d+=f+" = ?",e.push(Q(c.lower[g],b[g]));else f=K(a),d=f+" = ?",e.push(Q(c.lower,b));else{if(c.lower!=r)if(y(a))for(var h="=",g=0;g<c.lower.length;g++)0<g&&(d+=" AND "),g==c.lower.length-1&&(h=c.lowerOpen?" > ":" >= "),f=K(a[g]),d+=" "+f+h+"?",f=b?b[g]:l,e.push(Q(c.lower[g],f));else h=c.lowerOpen?" > ":" >= ",f=K(a),d+=" "+f+h+"?",e.push(Q(c.lower,b));if(c.upper!=r)if(d+=0<d.length?" AND ":" ",y(a)){h="=";
for(g=0;g<a.length;g++){0<g&&(d+=" AND ");g>=c.upper.length-1&&(h=c.upperOpen?" < ":" <= ");var f=K(a[g]),d=d+(" "+f+h+"?"),f=b?b[g]:l,j=c.upper[g],j=j!=r?j:"\uffff";e.push(Q(j,f))}}else h=c.upperOpen?" < ":" <= ",f=K(a),d+=" "+f+h+"?",e.push(Q(c.upper,b))}return{sql:d,params:e}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function S(a,b){this.c=[];this.Ja=a;this.i=b||r}u=S.prototype;u.ma=s;u.Ga=s;u.rb=s;u.tc=s;u.Fb=s;u.sb=0;function wc(a,b){if(a.ma)a.b instanceof S&&wc(a.b);else{if(a.a){var c=a.a;delete a.a;b?wc(c,b):(c.sb--,0>=c.sb&&wc(c))}a.Ja?a.Ja.call(a.i,a):a.Fb=n;a.ma||a.f(new xc)}}u.Qb=function(a,b){this.rb=s;yc(this,a,b)};function yc(a,b,c){a.ma=n;a.b=c;a.Ga=!b;zc(a)}function Ac(a){a.ma&&(a.Fb||k(new Bc),a.Fb=s)}function T(a,b){Ac(a);yc(a,n,b)}u.f=function(a){Ac(this);yc(this,s,a)};
u.T=function(a,b){return this.O(a,r,b)};u.ob=function(a,b){return this.O(r,a,b)};u.rc=function(a,b){return this.O(a,a,b)};u.O=function(a,b,c){this.c.push([a,b,c]);this.ma&&zc(this);return this};function Cc(a){return Ua(a.c,function(a){return B(a[1])})}
function zc(a){a.g&&(a.ma&&Cc(a))&&(w.clearTimeout(a.g),delete a.g);a.a&&(a.a.sb--,delete a.a);for(var b=a.b,c=s,d=s;a.c.length&&!a.rb;){var e=a.c.shift(),f=e[0],g=e[1],e=e[2];if(f=a.Ga?g:f)try{var h=f.call(e||a.i,b);x(h)&&(a.Ga=a.Ga&&(h==b||h instanceof Error),a.b=b=h);b instanceof S&&(d=n,a.rb=n)}catch(j){b=j,a.Ga=n,Cc(a)||(c=n)}}a.b=b;d&&(b.O(ma(a.Qb,a,n),ma(a.Qb,a,s)),b.tc=n);c&&(a.g=w.setTimeout(function(){k(b)},0))}function Dc(a){var b=new S;T(b,a);return b}function Bc(){Oa.call(this)}
F(Bc,Oa);Bc.prototype.message="Deferred has already fired";Bc.prototype.name="AlreadyCalledError";function xc(){Oa.call(this)}F(xc,Oa);xc.prototype.message="Deferred was cancelled";xc.prototype.name="CancelledError";function Ec(){return new S}var Fc={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Gc=w.webkitIDBRequest&&"LOADING"in w.webkitIDBRequest?w.webkitIDBTransaction||w.IDBTransaction:w.IDBRequest&&"LOADING"in w.IDBRequest?w.IDBTransaction:Fc,U=Gc.READ_ONLY,Hc=Gc.READ_WRITE,Ic=Gc.VERSION_CHANGE;function Jc(a,b){return a?b?"prevunique":"prev":b?"nextunique":"next"};function V(a,b,c,d,e,f){z(a)||k(new I("store name must be a string"));this.M=a;this.index=b;this.H=x(f)?f:!!z(this.index);ga(this.H)||k(new I("key_only"));x(d)&&!ga(d)&&k(new I("reverse"));x(e)&&!ga(e)&&k(new I("unique"));a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.direction=a;(d=wa(c))&&k(new I("Invalid key range: "+d));this.L=ua(c);this.Wa=[];this.Tb=[];this.Ub=[];this.vb=[];this.ub=[];this.c=0;this.J=this.b=this.a=l;this.Ia=s}
function Kc(a,b,c){3<arguments.length&&k(new I("too many argument"));V.call(this,a,l,b,c,l,n)}F(Kc,V);function Lc(a,b,c,d,e){z(b)||k(new I("index name must be string"));V.call(this,a,b,c,d,e,n)}F(Lc,V);function Mc(a,b,c){3<arguments.length&&k(new I("too many argument"));V.call(this,a,l,b,c,l,s)}F(Mc,V);function Nc(a,b,c,d,e){z(b)||k(new I("index name must be string"));V.call(this,a,b,c,d,e,s)}F(Nc,V);function Oc(a){return x(a.J)?a.J===s?a.Ia?"working":"resting":"completed":"initial"}u=V.prototype;
u.ic=P("ydn.db.Iterator");u.Fc=t("M");u.xa=t("index");u.J=l;u.Ia=s;u.o=t("a");u.Ec=function(){return z(this.index)?this.b:this.a};u.gc=function(){return this.L?this.L instanceof va?this.L:va.bound(this.L.lower,this.L.upper,this.L.lowerOpen,this.L.upperOpen):r};u.H=n;u.Gc=t("H");u.toJSON=function(){return{store:this.M,index:this.index,key_range:this.L?qa(this.L):r,direction:this.direction}};
u.toString=function(){var a=x(this.index)?":"+this.index:"";if(this.a!=r){var b="]",c="[",d=Oc(this);"working"==d?(c="{",b="}"):"resting"==d&&(c="(",b=")");a+=" "+c+this.a+", "+this.b+b}b=z(this.index)?"Index":"";b+=this.H?"Key":"Value";return b+"Iterator:"+this.M+a};u.key=t("a");u.Ac=function(a,b){this.a=a;this.b=b};u.Dc=t("c");u.vc=t("J");u.stores=function(){return[this.M].concat(this.eb)};u.eb=[];u.sc=[];u.hc=function(){return"prev"===this.direction||"prevunique"===this.direction};
u.Hc=function(){return"nextunique"===this.direction||"prevunique"===this.direction};u.Wa=[];u.Tb=[];u.Ub=[];u.vb=[];u.ub=[];function Qc(a){a.a=y(a.a)?$a(a.a):a.a;a.b=y(a.b)?$a(a.b):a.b;a.Ia=s;a.J=s;O(a.ic,a+": exited")}
function Rc(a,b){var c;if(0<a.Wa.length){var d,e=a.J===s;e?(c=a.a,d=a.b):a.c=0;a.Ia=n;var f=[],g=b.Ya(a.M,a.index,a.L,a.direction,a.H);g.za(c,d,e);g.v=function(b,c){x(b)?(a.J=s,a.a=b,a.b=c,h()&&j()):(a.J=n,a.Ia=s)};c=function(b,c,d){h();x(c)&&(a.vb[b]=c,a.ub[b]=d);h()&&j()};for(d=0;d<a.Wa.length;d++)e=b.Ya(a.Ub[d]||a.M,a.Wa[d],a.Tb[d],a.direction,n),e.za(a.vb[d],a.ub[d]),f.push(e),e.v=na(c,d);var h=function(){return!f.some(function(a){return a.V})},j=function(){for(var b=s,c=n,d=[],e=a.a,h=0;h<f.length;h++){var j=
f[h];if(j.U()){var m=R(a.a,j.o());d[h]=m;1===m?c=s:-1===m&&(c=s,b=n,1===R(j.o(),e)&&(e=j.o()))}else c=s}if(c){g.A(g.o(),g.S(),g.aa());for(h=0;h<f.length;h++)f[h].forward(n)}else if(b){e!=a.a&&g.Ta(e);for(h=0;h<f.length;h++)0==d[h]?f[h].I(e):-1==d[h]?f[h].I(e):f[h].U()?e!=f[h].o()&&f[h].I(e):f[h].I(e)}else{a.a!=e&&g.I(e);for(h=0;h<f.length;h++)(!f[h].U()||0!==R(f[h].o(),e))&&f[h].I(e)}};c=g}else{var m;(c=a.J===s)?(e=a.a,m=a.b):a.c=0;a.J=l;var p=b.Ya(a.M,a.index,a.L,a.direction,a.H);O(a.ic,a+" created "+
p);p.v=function(b,c,d){x(b)?(a.a=b,a.b=c,a.c++,p.A(b,c,d)):(a.J=n,p.A(l,l,l))};p.za(e,m,c);c=p}return c}u.Ic=function(){"working"==Oc(this)&&k(new W("working"));this.c=0;this.J=this.b=this.a=l};function Sc(a,b,c,d,e,f){S.call(this,e,f);this.da=a;this.e=[];this.p=!!b;this.Bb=!!c;this.yb=!!d;for(b=0;b<a.length;b++)a[b].O(ma(this.D,this,b,n),ma(this.D,this,b,s));0==a.length&&!this.p&&T(this,this.e)}F(Sc,S);Sc.prototype.ea=0;Sc.prototype.D=function(a,b,c){this.ea++;this.e[a]=[b,c];this.ma||(this.p&&b?T(this,[a,c]):this.Bb&&!b?this.f(c):this.ea==this.da.length&&T(this,this.e));this.yb&&!b&&(c=r);return c};Sc.prototype.f=function(a){Sc.ha.f.call(this,a);Sa(this.da,function(a){wc(a)})};function Tc(a){Error.captureStackTrace?Error.captureStackTrace(this,Tc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}F(Tc,Error);function Uc(a){Error.captureStackTrace?Error.captureStackTrace(this,Uc):this.stack=Error().stack||"";a&&(this.message=String(a))}F(Uc,Error);Uc.prototype.name="ydn.db.InternalError";
function Vc(a){Error.captureStackTrace?Error.captureStackTrace(this,Vc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}F(Vc,Error);function Wc(a){Error.captureStackTrace?Error.captureStackTrace(this,Wc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}F(Wc,Error);function Xc(a){Error.captureStackTrace?Error.captureStackTrace(this,Xc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}
F(Xc,Error);Xc.prototype.name="NotFoundError";function Yc(a){Error.captureStackTrace?Error.captureStackTrace(this,Yc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="DataCloneError"}F(Yc,Error);function Zc(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Zc):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}F(Zc,Error);
function $c(a,b){Error.captureStackTrace?Error.captureStackTrace(this,$c):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}F($c,Error);function ad(a){Error.captureStackTrace?Error.captureStackTrace(this,ad):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}F(ad,Error);function bd(a,b,c){var d;C(a)?(d=a.store,b=a.id,a.parent!=r&&(c=new bd(a.parent))):x(b)?d=a:(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new bd(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],x(b)||k(Error("Invalid key value: "+a)));this.a=d;this.id=b;this.b=c||r}u=bd.prototype;u.toJSON=function(){var a={store:this.a,id:this.id};this.b&&(a.parent=this.b.toJSON());return a};u.valueOf=function(){return(this.b?this.b.valueOf()+"^|":"")+this.a+"^:"+this.id};
u.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};u.Kc=t("a");u.wc=t("id");u.Jc=t("b");function cd(a,b){this.wa=a;this.a=b}cd.prototype.d=P("ydn.db.core.req.RequestExecutor");cd.prototype.h=r;cd.prototype.ib=function(a){this.h=a};function dd(a){Error.captureStackTrace?Error.captureStackTrace(this,dd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.ArgumentException"}F(dd,Error);function ed(a){Error.captureStackTrace?Error.captureStackTrace(this,ed):this.stack=Error().stack||"";a&&(this.message=String(a))}F(dd,Error);ed.prototype.name="ydn.NotSupportedException";
function fd(a){Error.captureStackTrace?Error.captureStackTrace(this,fd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.NotImplementedException"}F(fd,Error);function gd(a){Error.captureStackTrace?Error.captureStackTrace(this,gd):this.stack=Error().stack||"";a&&(this.message=String(a))}F(gd,Error);gd.prototype.name="ydn.InternalError";
function hd(a){Error.captureStackTrace?Error.captureStackTrace(this,hd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.ConstrainError"}F(hd,Error);function id(a){Error.captureStackTrace?Error.captureStackTrace(this,id):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.InvalidOperationException"}F(dd,Error);
function W(a){Error.captureStackTrace?Error.captureStackTrace(this,W):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.InvalidOperationError"}F(W,Error);P("ydn");function ta(a){if(!z(a)||/^[\s\xa0]*$/.test(a))return{};try{return JSON.parse(a)}catch(b){k(b)}}function G(a){return JSON.stringify(a)};function jd(a,b){cd.call(this,a,b)}F(jd,cd);u=jd.prototype;u.d=P("ydn.db.core.req.IndexedDb");u.n=t("h");u.Ua=function(a,b){function c(g){var h=d.h.objectStore(b[g]).count();h.onsuccess=function(h){e[g]=h.target.result;g++;g==b.length?(O(d.d,"success "+f),T(a,e)):c(g)};h.onerror=function(b){M(d.d,"error "+f);a.f(b)}}var d=this,e=[],f="countStores: "+b;O(this.d,f);0==b.length?T(a,[]):c(0)};
u.pb=function(a,b,c,d){var e=this.h.objectStore(b),f="addObject: "+b+" "+d;O(this.d,f);var g=this;b=x(d)?e.add(c,d):e.add(c);b.onsuccess=function(b){O(g.d,"success "+f);T(a,b.target.result)};b.onerror=function(b){O(g.d,"error "+f);a.f(b)}};
u.Cb=function(a,b,c,d){var e=this.h.objectStore(b),f="putObject: "+b+" "+d;O(this.d,f);var g=this;d=x(d)?e.put(c,d):e.put(c);d.onsuccess=function(b){O(g.d,"success "+f);T(a,b.target.result)};d.onerror=function(d){"DataError"==d.name&&(d=G(c),d=new Tc(b+": "+d.substring(0,70)));O(g.d,"error "+f);a.f(d)}};
u.qb=function(a,b,c,d){function e(p){var v;v=x(d)?j.add(c[p],d[p]):j.add(c[p]);v.onsuccess=function(b){g++;f[p]=b.target.result;g==c.length?(O(h.d,"success "+m),T(a,f)):(b=p+10,b<c.length&&e(b))};v.onerror=function(d){g++;"DataError"==d.name?d=new Tc('put to "'+b+'": '+p+" of "+c.length):"DataCloneError"==d.name&&(d=new Yc('put to "'+b+'": '+p+" of "+c.length));O(h.d,"error "+m);a.f(d)}}var f=[],g=0,h=this,j=this.h.objectStore(b),m="addObjects: "+b+" "+c.length+" objects";O(this.d,m);if(0<c.length)for(var p=
0;10>p&&p<c.length;p++)e(p);else T(a,[])};
u.Db=function(a,b,c,d){function e(p){var v;v=x(d)?j.put(c[p],d[p]):j.put(c[p]);v.onsuccess=function(b){g++;f[p]=b.target.result;g==c.length?(O(h.d,"success "+m),T(a,f)):(b=p+10,b<c.length&&e(b))};v.onerror=function(d){g++;"DataError"==d.name?d=new Tc('put to "'+b+'": '+p+" of "+c.length):"DataCloneError"==d.name&&(d=new Yc('put to "'+b+'": '+p+" of "+c.length));O(h.d,"error "+m);a.f(d)}}var f=[],g=0,h=this,j=this.h.objectStore(b),m="putObjects: "+b+" "+c.length+" objects";O(this.d,m);if(0<c.length)for(var p=
0;10>p&&p<c.length;p++)e(p);else T(a,[])};u.tb=function(a,b,c){var d=this,e=this.h.objectStore(b),f="clearById: "+b+" "+c;O(this.d,f);b=e.openCursor(c);b.onsuccess=function(b){var c=b.target.result;c?(c=c["delete"](),c.onsuccess=function(){O(d.d,"success "+f);T(a,1)},c.onerror=function(){a.f(b)}):T(a,l)};b.onerror=function(b){O(d.d,"error "+f);a.f(b)}};
u.Ob=function(a,b,c){var d=this,e=this.h.objectStore(b),f=e.count(c),g="clearByKeyRange: "+b+" "+c;O(this.d,g);f.onsuccess=function(b){var f=b.target.result;b=e["delete"](c);b.onsuccess=function(){O(d.d,"success "+g);T(a,f)};b.onerror=function(b){O(d.d,"error "+g);a.f(b)}};f.onerror=function(b){O(d.d,"error "+g);a.f(b)}};
u.Nb=function(a,b,c,d){var e=this,f=this.h.objectStore(b).index(c),g="clearByIndexKeyRange: "+b+":"+c+" "+d;O(this.d,g);b=f.openCursor(d);var h=0;b.onsuccess=function(b){var c=b.target.result;c?(b=c["delete"](),b.onsuccess=function(){h++;c["continue"]()},b.onerror=function(a){O(e.d,"error "+g);k(a)}):(O(e.d,"success "+g),T(a,h))};b.onerror=function(b){O(e.d,"error "+g);a.f(b)}};
u.Sa=function(a,b){var c=this,d=b.length,e=0,f="clearByStores: "+b;O(this.d,f);for(var g=0;g<d;g++){var h=this.h.objectStore(b[g]).clear();h.onsuccess=function(){e++;e==d&&(O(c.d,"success "+f),T(a,e))};h.onerror=function(b){e++;e==d&&(O(c.d,"error "+f),a.f(b))}}};
function kd(a,b,c,d,e,f,g,h,j){var m=[],p=a.h.objectStore(c);f=Jc(f,j);var q="listByKeyRange: "+c+(d?":"+d:"")+(e?G(e):"");O(a.d,q);c=d?p.index(d).openCursor(e,f):p.openCursor(e,f);var v=s;c.onsuccess=function(c){if(c=c.target.result)if(!v&&0<h)v=n,c.advance(h);else if(m.push(c.value),m.length<g)c["continue"]();else O(a.d,"success "+q),T(b,m);else O(a.d,"success "+q),T(b,m)};c.onerror=function(c){O(a.d,"error "+q);b.f(c)}}u.Ka=function(a,b,c,d,e,f){kd(this,a,b,r,c,d,e,f)};
u.bb=function(a,b,c,d,e,f,g,h){kd(this,a,b,c,d,e,f,g,h)};u.Zb=function(a,b,c,d,e,f){var g=[],h=this,j=this.h.objectStore(b);d=Jc(d);var m="keysByKeyRange: "+b+" "+c;O(this.d,m);b=j.openCursor(c,d);var p=s;b.onsuccess=function(b){if(b=b.target.result)if(!p&&0<f)p=n,b.advance(f);else if(g.push(b.key),g.length<e)b["continue"]();else O(h.d,"success "+m),T(a,g);else O(h.d,"success "+m),T(a,g)};b.onerror=function(b){O(h.d,"error "+m);a.f(b)}};
u.Xb=function(a,b,c,d,e,f,g,h){var j=[],m=this,p=this.h.objectStore(b).index(c),q="keysByStore: "+b+":"+c+" "+d;O(this.d,q);b=p.openKeyCursor(d,Jc(e,h));var v=s;b.onsuccess=function(b){if(b=b.target.result)if(!v&&0<g)v=n,b.advance(g);else{if(j.push(b.primaryKey),j.length<f)b["continue"]()}else O(m.d,"success "+q),T(a,j)};b.onerror=function(b){O(m.d,"error "+q);a.f(b)}};
u.Xa=function(a,b,c){var d=this,e="getById: "+b+":"+c;O(this.d,e);var f;try{f=this.h.objectStore(b)}catch(g){"NotFoundError"==g.name&&k(new Xc(b+" not in Tx scope: ")),k(g)}b=f.get(c);b.onsuccess=function(b){O(d.d,"success "+e);T(a,b.target.result)};b.onerror=function(b){O(d.d,"error "+e);a.f(b)}};
u.zb=function(a,b,c){function d(b){if(c[b]==r)if(g++,f[b]=l,g==j)O(e.d,"success "+m),T(a,f);else{var q=b+10;q<j&&d(q)}var v;try{v=h.get(c[b])}catch(J){"DataError"==J.name&&k(new Tc(c[b])),k(J)}v.onsuccess=function(c){g++;f[b]=c.target.result;g==j?(O(e.d,"success "+m),T(a,f)):(c=b+10,c<j&&d(c))};v.onerror=function(b){g++;O(e.d,"error "+m);a.f(b)}}var e=this,f=[],g=0,h=this.h.objectStore(b),j=c.length,m="listByIds: "+b+":"+j+" ids";O(this.d,m);if(0<j)for(b=0;10>b&&b<j;b++)d(b);else O(e.d,"success "+
m),T(a,[])};u.Ab=function(a,b){function c(h){var m=b[h],p=d.h.objectStore(m.a),q;try{q=p.get(m.id)}catch(v){"DataError"==v.name&&k(new Tc(m+" at "+h)),k(v)}q.onsuccess=function(m){f++;e[h]=m.target.result;f==b.length?(O(d.d,"success "+g),T(a,e)):(m=h+10,m<b.length&&c(m))};q.onerror=function(b){f++;O(d.d,"error "+g);a.f(b)}}var d=this,e=[],f=0,g="listByKeys: "+b.length+" ids";O(this.d,g);if(0<b.length)for(var h=0;10>h&&h<b.length;h++)c(h);else T(a,[])};
u.va=function(a,b,c,d){var e=this,f=this.h.objectStore(b),g="countKeyRange: "+b+(d?":"+d:"")+(c?":"+G(c):"");O(this.d,g);d!=r?(b=f.index(d),c=c!=r?b.count(c):b.count()):c=c!=r?f.count(c):f.count();c.onsuccess=function(b){O(e.d,"success "+g);T(a,b.target.result)};c.onerror=function(b){O(e.d,"error "+g);a.f(b)}};function ld(){0!=md&&ha(this)}var md=0;var nd=!L||L&&9<=Ab,od=L&&!yb("9");!pb||yb("528");ob&&yb("1.9b")||L&&yb("8")||nb&&yb("9.5")||pb&&yb("528");ob&&!yb("8")||L&&yb("9");function pd(a,b){this.type=a;this.a=this.target=b}pd.prototype.b=s;pd.prototype.c=n;pd.prototype.wb=function(){this.c=s};function qd(a){qd[" "](a);return a}qd[" "]=aa();function rd(a,b){a&&sd(this,a,b)}F(rd,pd);u=rd.prototype;u.target=r;u.clientX=0;u.clientY=0;u.Sb=r;function sd(a,b,c){var d=a.type=b.type;pd.call(a,d);a.target=b.target||b.srcElement;a.a=c;if((c=b.relatedTarget)&&ob)try{qd(c.nodeName)}catch(e){}a.clientX=b.clientX!==l?b.clientX:b.pageX;a.clientY=b.clientY!==l?b.clientY:b.pageY;a.Sb=b;b.defaultPrevented&&a.wb();delete a.b}
u.wb=function(){rd.ha.wb.call(this);var a=this.Sb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=s,od)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var td=0;function ud(){}ud.prototype.key=0;ud.prototype.qa=s;ud.prototype.Ra=s;ud.prototype.handleEvent=function(a){return this.a?this.fa.call(this.xb||this.src,a):this.fa.handleEvent.call(this.fa,a)};var vd={},wd={},xd={},yd={};
function zd(a,b,c,d,e){if(y(b))for(var f=0;f<b.length;f++)zd(a,b[f],c,d,e);else{a:{b||k(Error("Invalid event type"));d=!!d;var g=wd;b in g||(g[b]={P:0,C:0});g=g[b];d in g||(g[d]={P:0,C:0},g.P++);var g=g[d],f=ha(a),h;g.C++;if(g[f]){h=g[f];for(var j=0;j<h.length;j++)if(g=h[j],g.fa==c&&g.xb==e){if(g.qa)break;h[j].Ra=s;a=h[j];break a}}else h=g[f]=[],g.P++;var m=Ad,p=nd?function(a){return m.call(p.src,p.fa,a)}:function(a){a=m.call(p.src,p.fa,a);if(!a)return a},j=p,q=g=new ud;B(c)?q.a=n:c&&c.handleEvent&&
B(c.handleEvent)?q.a=s:k(Error("Invalid listener argument"));q.fa=c;q.b=j;q.src=a;q.type=b;q.capture=!!d;q.xb=e;q.Ra=s;q.key=++td;q.qa=s;g.Ra=s;j.src=a;j.fa=g;h.push(g);xd[f]||(xd[f]=[]);xd[f].push(g);a.addEventListener?(a==w||!a.Rb)&&a.addEventListener(b,j,d):a.attachEvent(b in yd?yd[b]:yd[b]="on"+b,j);a=g}vd[a.key]=a}}
function Bd(a,b,c,d,e){if(y(b))for(var f=0;f<b.length;f++)Bd(a,b[f],c,d,e);else{d=!!d;a:{f=wd;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ha(a),f[a]))){a=f[a];break a}a=r}if(a)for(f=0;f<a.length;f++)if(a[f].fa==c&&a[f].capture==d&&a[f].xb==e){Cd(a[f].key);break}}}
function Cd(a){var b=vd[a];if(b&&!b.qa){var c=b.src,d=b.type,e=b.b,f=b.capture;c.removeEventListener?(c==w||!c.Rb)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in yd?yd[d]:yd[d]="on"+d,e);c=ha(c);xd[c]&&(e=xd[c],Za(e,b),0==e.length&&delete xd[c]);b.qa=n;if(b=wd[d][f][c])b.ac=n,Dd(d,f,c,b);delete vd[a]}}
function Dd(a,b,c,d){if(!d.cb&&d.ac){for(var e=0,f=0;e<d.length;e++)d[e].qa?d[e].b.src=r:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.ac=s;0==f&&(delete wd[a][b][c],wd[a][b].P--,0==wd[a][b].P&&(delete wd[a][b],wd[a].P--),0==wd[a].P&&delete wd[a])}}function Ed(a,b,c,d,e){var f=1;b=ha(b);if(a[b]){var g=--a.C,h=a[b];h.cb?h.cb++:h.cb=1;try{for(var j=h.length,m=0;m<j;m++){var p=h[m];p&&!p.qa&&(f&=Fd(p,e)!==s)}}finally{a.C=Math.max(g,a.C),h.cb--,Dd(c,d,b,h)}}return Boolean(f)}
function Fd(a,b){a.Ra&&Cd(a.key);return a.handleEvent(b)}
function Ad(a,b){if(a.qa)return n;var c=a.type,d=wd;if(!(c in d))return n;var d=d[c],e,f;if(!nd){e=b||da("window.event");var g=n in d,h=s in d;if(g){if(0>e.keyCode||e.returnValue!=l)return n;a:{var j=s;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(m){j=n}if(j||e.returnValue==l)e.returnValue=n}}j=new rd;sd(j,e,this);e=n;try{if(g){for(var p=[],q=j.a;q;q=q.parentNode)p.push(q);f=d[n];f.C=f.P;for(var v=p.length-1;!j.b&&0<=v&&f.C;v--)j.a=p[v],e&=Ed(f,p[v],c,n,j);if(h){f=d[s];f.C=f.P;for(v=0;!j.b&&v<p.length&&
f.C;v++)j.a=p[v],e&=Ed(f,p[v],c,s,j)}}else e=Fd(a,j)}finally{p&&(p.length=0)}return e}c=new rd(b,this);return e=Fd(a,c)};function Gd(){ld.call(this)}F(Gd,ld);Gd.prototype.Rb=n;Gd.prototype.addEventListener=function(a,b,c,d){zd(this,a,b,c,d)};Gd.prototype.removeEventListener=function(a,b,c,d){Bd(this,a,b,c,d)};
function Hd(a,b){var c=b,d=c.type||c,e=wd;if(d in e){if(z(c))c=new pd(c,a);else if(c instanceof pd)c.target=c.target||a;else{var f=c,c=new pd(d,a);fb(c,f)}var f=1,g,e=e[d],d=n in e,h;if(d){g=[];for(h=a;h;h=r)g.push(h);h=e[n];h.C=h.P;for(var j=g.length-1;!c.b&&0<=j&&h.C;j--)c.a=g[j],f&=Ed(h,g[j],c.type,n,c)&&c.c!=s}if(s in e)if(h=e[s],h.C=h.P,d)for(j=0;!c.b&&j<g.length&&h.C;j++)c.a=g[j],f&=Ed(h,g[j],c.type,s,c)&&c.c!=s;else for(e=a;!c.b&&e&&h.C;e=r)c.a=e,f&=Ed(h,e,c.type,s,c)&&c.c!=s}};function Id(a,b,c){B(a)?c&&(a=ma(a,c)):a&&"function"==typeof a.handleEvent?a=ma(a.handleEvent,a):k(Error("Invalid listener argument"));2147483647<b||w.setTimeout(a,b||0)};function Jd(a,b){cd.call(this,a,b)}F(Jd,cd);u=Jd.prototype;u.n=t("h");u.pb=function(a,b,c,d){b=Kd(this.n(),c,b,d);T(a,b)};u.Cb=function(a,b,c,d){b=Kd(this.n(),c,b,d);T(a,b)};u.qb=function(a,b,c,d){for(var e=[],f=0;f<c.length;f++)e[f]=Kd(this.n(),c[f],b,x(d)?d[f]:l);T(a,e)};u.Db=function(a,b,c,d){for(var e=[],f=0;f<c.length;f++)e[f]=Kd(this.n(),c[f],b,x(d)?d[f]:l);T(a,e)};u.Xa=function(a,b,c){T(a,Ld(this.n(),b,c))};
u.zb=function(a,b,c){for(var d=[],e=0;e<c.length;e++){var f=Ld(this.n(),b,c[e]);d.push(f)}T(a,d)};u.Ab=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=Ld(this.n(),b[d].a,b[d].id);c.push(e)}T(a,c)};u.bb=aa();u.tb=function(a,b,c){Md(this.n(),b,c);T(a,n)};u.Sa=function(a,b){for(var c=0;c<b.length;c++)Md(this.h,b[c]);T(a,n)};u.Ua=function(a,b){Id(function(){for(var c=[],d=0;d<b.length;d++){var e=this.h.Za(b[d]);c[d]=e.length}T(a,c)},0,this)};
u.va=function(a,b){var c="_database_"+this.wa;x(b)&&(c+="-"+b);var d=0,e;for(e in this.h)this.h.hasOwnProperty(e)&&0==e.lastIndexOf(c,0)&&d++;T(a,d)};D("ydn.async.all",function(a){for(var b=[],c,d=0;c=a[d];d++){var e=new S;c.success(na(function(a,b){T(a,b)},e));c.error(na(function(a,b){a.f(b)},e));b[d]=e}return new Sc(b)});function Nd(a,b){cd.call(this,a,b)}F(Nd,cd);u=Nd.prototype;u.d=P("ydn.db.core.req.WebSql");function Pd(a,b){var c=a._default_?ta(a._default_):{};if(b.keyPath!=r){var d=Qd(a[b.keyPath],b.type);if(d!=r)for(var e=c,f=0;f<b.b.length;f++){var g=b.b[f];if(f==b.b.length-1){e[g]=d;break}x(e[g])||(e[g]={});e=e[g]}}for(d=0;d<b.indexes.length;d++)e=b.indexes[d],"_default_"!=e.name&&(f=a[e.name],f=e.multiEntry?Qd(f,[e.type]):Qd(f,e.type),x(f)&&(c[e.name]=f));return c}u.n=t("h");
u.Zb=function(a,b,c,d,e,f){Rd(this,a,n,b,l,c,d,e,f,s)};u.Xb=function(a,b,c,d,e,f,g,h){Rd(this,a,n,b,c,d,e,f,g,h)};
function Rd(a,b,c,d,e,f,g,h,j,m){var p=[],q=X(a.a,d);d=e!=r;var v=z(e)?Sd(q,e):r,v=v?v.keyPath:q.keyPath;e=K(e||Td(q));var J=Td(q),E="*";d?E=c?K(J):e:c&&(E=K(J));var H="SELECT "+(m?"DISTINCT":"")+E+" FROM "+Ud(q);m=[];f!==r&&(f=vc(v,q.type,f),H+=" WHERE "+f.sql,m=f.params);H+=" ORDER BY "+e+" "+(g?"DESC":"ASC");A(h)&&(H+=" LIMIT "+h);A(j)&&(H+=" OFFSET "+j);O(a.d,"SQL: "+H+" PARAMS: "+G(m));a.h.executeSql(H,m,function(d,e){for(var f=0,g=e.rows.length;f<g;f++){var h=e.rows.item(f);c?p[f]=Qd(h[J],q.type):
h!=r&&(p[f]=Pd(h,q))}O(a.d,"success "+H);T(b,p)},function(c,d){M(a.d,"error: "+H+" "+d.message);b.f(d);return n})}u.pb=function(a,b,c,d){Vd(this,a,n,n,b,[c],[d])};u.Cb=function(a,b,c,d){Vd(this,a,s,n,b,[c],[d])};u.qb=function(a,b,c,d){Vd(this,a,n,s,b,c,d)};
function Vd(a,b,c,d,e,f,g){function h(c,e){var E;E=x(g)?Wd(j,f[c],g[c]):Wd(j,f[c]);var H=m+Ud(j)+" ("+E.Pb.join(", ")+") VALUES ("+E.ec.join(", ")+");";O(a.d,"SQL: "+H+" PARAMS: "+E.G);e.executeSql(H,E.G,function(e,g){q++;var j=x(E.key)?E.key:g.insertId;d?(O(a.d,"success "+H),T(b,j)):(p[c]=j,q==f.length?(O(a.d,"success "+H),T(b,p)):(j=c+2,j<f.length&&h(j,e)))},function(c,d){M(a.d,"error: "+H+" "+d.message);b.f(d);return n})}var j=X(a.a,e),m=c?"INSERT INTO ":"INSERT OR REPLACE INTO ",p=[],q=0;if(0<
f.length)for(c=0;2>c&&c<f.length;c++)h(c,a.n());else O(a.d,"success"),T(b,[])}u.Db=function(a,b,c,d){Vd(this,a,s,s,b,c,d)};u.Xa=function(a,b,c){var d=X(this.a,b),e=this;b=Xd(d);c=[Q(c,d.type)];var f="SELECT * FROM "+Ud(d)+" WHERE "+b+" = ?";O(this.d,"SQL: "+f+" PARAMS: "+c);this.h.executeSql(f,c,function(b,c){O(e.d,"success "+f);if(0<c.rows.length){var j=c.rows.item(0);j!=r?(j=Pd(j,d),T(a,j)):T(a,l)}else T(a,l)},function(b,c){M(e.d,"error: "+f+" "+c.message);a.f(c);return n})};
u.zb=function(a,b,c){function d(b,m){var p=c[b],q=Xd(h),p=[Q(p,h.type)],v="SELECT * FROM "+Ud(h)+" WHERE "+q+" = ?";O(e.d,"SQL: "+v+" PARAMS: "+p);m.executeSql(v,p,function(m,p){g++;if(0<p.rows.length){var q=p.rows.item(0);q!=r&&(f[b]=Pd(q,h))}else f[b]=l;g==c.length?(O(e.d,"success "+v),T(a,f)):(q=b+10,q<c.length&&d(q,m))},function(b,c){M(e.d,"error: "+v+" "+c.message);a.f(c);return n})}var e=this,f=[],g=0,h=X(this.a,b);if(0<c.length)for(b=0;10>b&&b<c.length;b++)d(b,this.n());else O(e.d,"success"),
T(a,[])};u.Ka=function(a,b,c,d,e,f){Rd(this,a,s,b,l,c,d,e,f,s)};u.bb=function(a,b,c,d,e,f,g,h){Rd(this,a,s,b,c,d,e,f,g,h)};
u.Ab=function(a,b){function c(g,j){var m=b[g],p=X(d.a,m.a),q=y(m.id)?m.id.join("^|"):m.id,m=Xd(p),q=[q],v="SELECT * FROM "+Ud(p)+" WHERE "+m+" = ?";O(d.d,"SQL: "+v+" PARAMS: "+q);j.executeSql(v,q,function(j,m){f++;if(0<m.rows.length){var q=m.rows.item(0);q!=r&&(e[g]=Pd(q,p))}else e[g]=l;f==b.length?(O(d.d,"success "+v),T(a,e)):(q=g+10,q<b.length&&c(q,j))},function(b,c){M(d.d,"error: "+v+" "+c.message);a.f(c);return n})}var d=this,e=[],f=0;if(0<b.length)for(var g=0;10>g&&g<b.length;g++)c(g,this.n());
else O(this.d,"success"),T(a,[])};u.Sa=function(a,b){function c(e,f){var g="DELETE FROM  "+Ud(X(d.a,b[e]));O(d.d,"SQL: "+g+" PARAMS: []");f.executeSql(g,[],function(f){e==b.length-1?(O(d.d,"success "+g),T(a,b.length)):c(e+1,f)},function(b,c){M(d.d,"error: "+g+" "+c.message);a.f(c);return n})}var d=this;0<b.length?c(0,this.h):(O(this.d,"success"),T(a,0))};
u.tb=function(a,b,c){b=X(this.a,b);c=Q(c,b.type);var d=this,e="DELETE FROM "+Ud(b)+" WHERE "+Yd(b)+" = ?";O(this.d,"SQL: "+e+" PARAMS: "+[c]);this.h.executeSql(e,[c],function(b,c){O(d.d,"success "+e);T(a,c.rowsAffected)},function(b,c){M(d.d,"error: "+e+" "+c.message);a.f(c);return n})};u.Ob=function(a,b,c){Zd(this,a,b,l,c)};u.Nb=function(a,b,c,d){Zd(this,a,b,c,d)};
function Zd(a,b,c,d,e){var f=X(a.a,c);c=f.type;x(d)?c=Sd(f,d).type:d=Td(f);var g="DELETE FROM "+Ud(f),f=[];e!==r&&(d=vc(d,c,e),g+=" WHERE "+d.sql,f=d.params);O(a.d,"SQL: "+g+" PARAMS: "+f);a.h.executeSql(g,f,function(c,d){O(a.d,"success "+g);T(b,d.rowsAffected)},function(c,d){M(a.d,"error: "+g+" "+d.message);b.f(d);return n})}
u.Ua=function(a,b){function c(f){var g="SELECT COUNT(*) FROM "+K(b[f]);O(d.d,"SQL: "+g+" PARAMS: []");d.h.executeSql(g,[],function(h,j){var m=j.rows.item(0);e[f]=parseInt(m["COUNT(*)"],10);f++;f==b.length?(O(d.d,"success "+g),T(a,e)):c(f)},function(b,c){M(d.d,"error: "+g+" "+c.message);a.f(c);return n})}var d=this,e=[];0==b.length?(O(this.d,"success"),T(a,0)):c(0);return a};
u.va=function(a,b,c,d){var e=this,f="SELECT COUNT(*) FROM "+K(b),g=[];b=X(this.a,b);if(c!==r)if(x(d)){var h=Sd(b,d);b=h.keyPath;var j=h.type;if(y(j)){f+=" WHERE ";if(c.lower!=r)if(y(j))for(var m="=",p=0;p<c.lower.length;p++)0<p&&(f+=" AND "),p==c.lower.length-1&&(m=c.lowerOpen?" > ":" >= "),h=K(b[p]),f+=" "+h+m+"?",g.push(Q(c.lower[p],j[p]));else m=c.lowerOpen?" > ":" >= ",h=K(d),f+=" "+h+m+"?",g.push(Q(c.lower,j));if(c.upper!=r)if(f+=0<f.length?" AND ":" ",y(j)){m="=";for(p=0;p<c.upper.length;p++)0<
p&&(f+=" AND "),p==c.upper.length-1&&(m=c.upperOpen?" < ":" <= "),h=K(b[p]),f+=" "+h+m+"?",g.push(Q(c.upper[p],j[p]))}else m=c.upperOpen?" < ":" <= ",h=K(d),f+=" AND "+h+m+"?",g.push(Q(c.upper,j))}else c=vc(b,j,c),f+=" WHERE "+c.sql,g=c.params}else h=Td(b),c=vc(h,b.type,c),f+=" WHERE "+c.sql,g=c.params;O(this.d,"SQL: "+f+" PARAMS: "+g);this.h.executeSql(f,g,function(b,c){var d=c.rows.item(0);O(e.d,"success "+f);T(a,d["COUNT(*)"])},function(b,c){M(e.d,"error: "+f+" "+c.message);a.f(c);return n});return a};
u.toString=function(){return"WebSqlEx:"+(this.wa||"")};var $d="atomic-serial overflow-serial strict-overflow-serial atomic-parallel overflow-parallel strict-overflow-parallel open single".split(" ");/*
 _try.
*/
function ae(a,b){this.b=a;this.e=b;this.sa=[];this.a=new be(b)}ae.prototype.c=P("ydn.db.tr.Serial");ae.prototype.a=r;ae.prototype.ca=function(){return this.a.c};ae.prototype.n=function(){return this.a.a&&!this.a.b?this.a.n():r};D("ydn.db.tr.Serial.prototype.getTx",ae.prototype.n);u=ae.prototype;u.type=function(){return this.b.p()};u.Wb=ba(s);u.oc=function(){this.a.a?this.a.n().abort():k(new Vc("No active transaction"))};u.cc=s;
u.fb=function(a,b,c,d,e){var f=a.name||"",g=z(b)?[b]:b;if(fa(g)){0==g.length&&k(new I("number of store names must more than 0"));for(var h=0;h<g.length;h++)z(g[h])||k(new I("store name at "+h+" must be string but found "+typeof g[h]))}else k(new I("store names must be an array"));var j=x(c)?c:U,m=a;if(4<arguments.length){var p=Array.prototype.slice.call(arguments,4),m=function(){var b=Array.prototype.slice.call(arguments),b=b.concat(p);return a.apply(this,b)};m.name=f}var q=this;if(this.a.a){var g=
4<arguments.length?m:a,h=b,v=j,J=d;O(this.c,"push tx queue "+g.name);this.sa.push({na:g,ga:h,mode:v,B:J})}else this.b.ka(function(a){q.cc=n;var c=q.a,e=b,g=j,h=f;c.a=a;c.b=s;c.ga=e;c.mode=g;c.hb=h||"";c.c++;c.B=r;O(c.nb,c+": open");m(q);m=r;if(q.Wb()){var p=this.sa.shift();B(d)&&B(p.B)?d=function(a,b){d(a,b);p.B(a,b)}:B(p.B)&&(d=p.B);O(q.c,"pop tx queue in continue "+p.na.name);p.na();d=p.B}},g,j,function(a,b){try{B(d)&&(d(a,b),d=l)}catch(c){k(c)}finally{var e=q.a;e.a?(O(e.nb,e+": close"),e.a=r,e.ga=
r,e.mode=r,B(e.B)&&e.B(a,b),e.B=r):M(e.nb,e+" has no TX to be unlocked for "+a);q.cc=s;if(0==q.b.i.length){var e=q,f=e.sa.shift();f&&(O(e.c,"pop tx queue "+f.na.name),e.fb(f.na,f.ga,f.mode,f.B))}}})};u.toString=function(){var a="ydn.db.tr.Serial:"+this.b.c,b=this.a.hb;return a+":"+this.e+":"+this.ca()+(b?" ["+b+"]":"")};function ce(a,b){ae.call(this,a,b)}F(ce,ae);ce.prototype.k=function(a,b,c,d,e){function f(){g.g=n;h.a||k(new Uc("Tx not active for scope: "+d));h.b&&k(new Uc("Tx not available for scope: "+d));a(h.n());a=r;O(h.nb,h+": locked");h.b=n}var g=this,h=this.a;f.name=d;g.fb(f,b,c,function(a,b){B(e)&&(e(a,b),e=r)})};function de(a,b,c){this.c=a;this.b=b;this.a=c}u=de.prototype;u.l=P("ydn.db.tr.DbOperator");u.ca=function(){return this.a.ca()};u.Qc=function(){this.a.oc()};u.j=function(a){this.e||(this.e=this.c.j());this.e.ib(a);return this.e};u.toString=function(){return"TxStorage:"+this.c.c};function ee(a,b,c){de.call(this,a,b,c)}F(ee,de);u=ee.prototype;u.l=P("ydn.db.core.DbOperator");
u.Da=function(a,b,c){var d=Ec(),e=this,f,g,h;if(x(a))if(y(a)){(x(c)||x(b))&&k(new I("too many arguments."));f=a;for(b=0;b<f.length;b++)fe(this.b,f[b])||k(new I('store name "'+f[b]+'" at '+b+" not found."));N(this.l,"countStores: "+G(f));this.a.k(function(a){e.j(a).Ua(d,f)},f,U,"countStores")}else z(a)?(fe(this.b,a)||k(new I('store name "'+a+'" not found.')),f=[a],z(b)?(g=b,h=ua(c)):C(b)||!x(b)?(x(c)&&k(new I("Invalid key range or index")),(a=wa(b))&&k(new I("invalid key range: "+b+" "+a)),h=ua(b)):
k(new I("key range must be an object, but "+b+" of type "+typeof b+" found.")),N(this.l,"countKeyRange: "+f[0]+" "+(g?g:"")+G(h)),this.a.k(function(a){e.j(a).va(d,f[0],h,g)},f,U,"countKeyRange")):k(new I("Invalid store name or store names."));else{(x(c)||x(b))&&k(new I("too many arguments."));f=ge(this.b);var j=new S;N(this.l,"countStores: "+G(f));this.a.k(function(a){e.j(a).Ua(d,f)},f,U,"countStores");d.O(function(a){a=a.reduce(function(a,b){return b+a},0);T(j,a)},function(a){j.f(a)});return j}return d};
u.Ea=function(a,b){var c=this,d=Ec();if(a instanceof bd){var e=a.a;if(!fe(this.b,e)){if(this.b.a())return Dc(l);k(new I("Store: "+e+" not found."))}var f=a.id;N(this.l,"getById: "+e+":"+f);this.a.k(function(a){c.j(a).Xa(d,e,f)},[e],U,"getById")}else if(z(a)&&x(b)){if(!X(this.b,a)){if(this.b.a())return Dc(l);k(new I('Store name "'+a+'" not found.'))}if(b instanceof va||b instanceof pa){var g=new S;g.O(function(a){T(d,a[0])},function(a){d.f(a)});var h=wa(b);h&&k(new I("invalid key range: "+b+" "+h));
var j=ua(b);N(this.l,"getById: "+a+":"+G(j));this.a.k(function(b){c.j(b).Ka(g,a,j,s,1,0)},[a],U,"getById")}else N(this.l,"getById: "+a+":"+b),this.a.k(function(e){c.j(e).Xa(d,a,b)},[a],U,"getById")}else k(new I);return d};
u.keys=function(a,b,c,d,e,f){var g=this,h,j,m=r,p=s,q=X(this.b,a);z(a)||k(new I("store name must be a string, but "+a+" of type "+typeof a+" is not."));this.b.a()||(q||k(new I('store name "'+a+'" not found.')),z(b)&&!Sd(q,b)&&k(new I('index "'+b+'" not found in store "'+a+'".')));if(this.b.a()&&!q)return Dc([]);var v=new S;z(b)?((q=wa(c))&&k(new I("invalid key range: "+c+" "+q)),m=ua(c),A(d)?h=d:(x(d)&&k(new I("limit must be a number")),h=100),A(e)?j=e:(x(e)&&k(new I("offset must be a number")),j=
0),x(f)&&(ga?p=f:k(new I("reverse must be a boolean"))),N(this.l,"keysByIndexKeyRange: "+a),this.a.k(function(c){g.j(c).Xb(v,a,b,m,p,h,j,s)},[a],U,"keysByIndexKeyRange")):((q=wa(b))&&k(new I("invalid key range: "+b+" "+q)),m=ua(b),A(c)?h=c:(x(c)&&k(new I("limit must be a number")),h=100),A(d)?j=d:(x(d)&&k(new I("offset must be a number")),j=0),x(e)&&(ga(e)?p=e:k(new I("reverse must be a boolean"))),N(this.l,"keysByKeyRange: "+a),this.a.k(function(b){g.j(b).Zb(v,a,m,p,h,j)},[a],U,"keysByKeyRange"));
return v};
u.G=function(a,b,c,d,e,f){var g=this,h=Ec(),j,m,p=s;if(z(a)){if(!X(this.b,a)){if(this.b.a())return Dc([]);k(new Xc(a))}if(y(b))(x(c)||x(d))&&k(new I("too many input arguments")),N(this.l,"listByIds: "+a+" "+b.length+" ids"),this.a.k(function(c){g.j(c).zb(h,a,b)},[a],U,"listByIds");else if(z(b)){var q=wa(c);q&&k(new I("invalid key range: "+c+" "+q));var v=ua(c);x(d)?A(d)?j=d:k(new I("limit must be a number.")):j=100;x(e)?A(e)?m=e:k(new I("offset must be a number.")):m=0;ga(f)?p=f:x(f)&&k(new I("reverse must be a boolean, but "+f));
N(this.l,"listByIndexKeyRange: "+a+":"+b);this.a.k(function(c){g.j(c).bb(h,a,b,v,p,j,m,s)},[a],U,"listByIndexKeyRange")}else(q=wa(b))&&k(new I("invalid key range: "+b+" "+q)),v=ua(b),x(c)?A(c)?j=c:k(new I("limit must be a number, but "+c+" is "+typeof c)):j=100,x(d)?A(d)?m=d:k(new I("offset must be a number, but "+d+" is "+typeof d)):m=0,x(e)&&(ga(e)?p=e:k(new I("reverse must be a boolean, but "+e+" is "+typeof e))),N(this.l,(v?"listByKeyRange: ":"listByStore: ")+a),this.a.k(function(b){g.j(b).Ka(h,
a,v,p,j,m)},[a],U,"listByKeyRange")}else if(y(a))if(a[0]instanceof bd){c=[];for(d=0;d<a.length;d++){e=a[d].a;if(!fe(this.b,e)){if(this.b.a())return c=[],c[a.length-1]=l,Dc(c);k(new I("Store: "+e+" not found."))}0<=xa(c,e)||c.push(e)}N(this.l,"listByKeys: "+G(c)+" "+a.length+" keys");this.a.k(function(b){g.j(b).Ab(h,a)},c,U,"listByKeys")}else k(new I("first argumentmust be array of ydn.db.Key, but "+a[0]+" is not."));else k(new I("first argument "+a+" is invalid."));return h};
u.lb=function(a,b,c){var d=z(a)?a:C(a)?a.name:l;z(d)||k(new I("store name "+d+" must be a string, but "+typeof d));var e=X(this.b,d);e?this.b.a()&&C(a)&&(a=he(a),(a=ie(e,a))&&k(new ed("schema change: "+a))):(this.b.a()||k(new I('store name "'+d+'" not found.')),e=he(C(a)?a:{name:d}),N(this.l,"Adding object store: "+d),je(this.c,e));var f=Ec(),g=this;e||k(new Xc(d));z(e.keyPath)&&x(c)&&k(new I("key cannot provide while in-line key is in used."));e.autoIncrement&&x(c)&&k(new I("key cannot provide while autoIncrement is true."));
!z(e.keyPath)&&(!e.autoIncrement&&!x(c))&&k(new I("out-of-line key must be provided."));y(b)?(N(this.l,"addObjects: "+d+" "+b.length+" objects"),this.a.k(function(a){g.j(a).qb(f,d,b,c)},[d],Hc,"putObjects"),e.a&&f.T(function(a){Hd(g.c,new ke(le,g.c,e.name,a,b))})):C(b)?(N(this.l,"addObject: "+d+" "+c),this.a.k(function(a){g.j(a).pb(f,d,b,c)},[d],Hc,"putObject"),e.a&&f.T(function(a){Hd(g.c,new me(le,g.c,e.name,a,b))})):k(new I);return f};
u.mb=function(a,b,c){var d;d=z(a)?a:C(a)?a.name:l;z(d)||k(new I("store name must be a string"));var e=X(this.b,d);e?this.b.a()&&C(a)&&(a=he(a),(a=ie(e,a))&&k(new ed("schema change: "+a))):(this.b.a()||k(new Xc(d)),e=he(C(a)?a:{name:d}),N(this.l,"Adding object store: "+d),je(this.c,e));e||k(new Xc(d));d=e;var f=d.name,g=Ec(),h=this;z(d.keyPath)&&x(c)&&k(new I("key cannot provide while in-line key is in used."));d.autoIncrement&&x(c)&&k(new I("key cannot provide while autoIncrement is true."));!z(d.keyPath)&&
(!d.autoIncrement&&!x(c))&&k(new I("out-of-line key must be provided."));y(b)?(N(this.l,"putObjects: "+f+" "+b.length+" objects"),this.a.k(function(a){h.j(a).Db(g,f,b,c)},[f],Hc,"putObjects"),d.a&&g.T(function(a){Hd(h.c,new ke(ne,h.c,f,a,b))})):C(b)?(N(this.l,"putObject: "+f+" "+c),this.a.k(function(a){h.j(a).Cb(g,f,b,c)},[f],Hc,"putObject"),d.a&&g.T(function(a){Hd(h.c,new me(ne,h.c,f,a,b))})):k(new I);return g};
u.clear=function(a,b,c){var d=Ec(),e=this;if(z(a)){var f=X(this.b,a);f||k(new I('store name "'+a+'" not found.'));if(x(c))if(z(b)){var g=Sd(f,b);g||k(new I("index: "+b+" not found in "+a));if(C(c)||c===r){var h=ua(c);N(this.l,"clearByIndexKeyRange: "+a+":"+g.name+" "+G(h));this.a.k(function(b){e.j(b).Nb(d,a,g.name,h)},[a],Hc,"clearByIndexKeyRange")}else k(new I("key range "+c+' is invalid type "'+typeof c+'".'))}else k(new I('index name "'+b+'" must be a string, but '+typeof b+" found."));else z(b)||
A(b)||b instanceof DOMStringList||y(b)||b instanceof Date?(N(this.l,"clearById: "+a+":"+b),this.a.k(function(c){e.j(c).tb(d,a,b)},[a],Hc,"clearById"),f.a&&d.T(function(b){Hd(e.c,new me(oe,e.c,a,b,l))})):C(b)||b===r?(h=ua(b),N(this.l,"clearByKeyRange: "+a+":"+G(h)),this.a.k(function(b){e.j(b).Ob(d,a,h)},[a],Hc,"clearByKeyRange")):(x(b)&&k(new I(b+" is an invalid key.")),N(this.l,"clearByStore: "+a),this.a.k(function(b){e.j(b).Sa(d,[a])},[a],Hc,"clearByStores"),f.a&&d.T(function(){Hd(e.c,new ke(oe,
e.c,a,r,l))}))}else if(!x(a)||y(a)&&z(a[0])){var j=a||ge(this.b);N(this.l,"clearByStores: "+G(j));this.a.k(function(a){e.j(a).Sa(d,j)},j,Hc,"clearByStores");for(var m=0;m<j.length;m++)X(this.b,j[m]).a&&d.T(function(){Hd(e.c,new ke(oe,e.c,j[m],r,l))})}else k(new I("first argument "+a+" is invalid."));return d};u.toString=function(){return"DbOperator:"+this.c.c};D("ydn.db.con.IStorage.prototype.transaction",aa().prototype.ka);function pe(a,b,c,d){"transaction"in a?(this.p=a,this.e=this.i=r):"objectStore"in a?(this.p=r,this.i=a.db,this.e=a,this.e.db.objectStoreNames.contains(b)||k(new dd('store "'+b+'" not in transaction.'))):k(new dd("storage instance require."));this.D=b;this.da=c;this.ea=d;this.c=[];this.b=0;this.g=s}pe.prototype.a=P("ydn.db.con.IdbCursorStream");pe.prototype.g=s;pe.prototype.c=[];function qe(a,b,c){C(a)&&"transaction"in a?(this.Pa=a,this.ia=r):C(a)&&"db"in a?(this.Pa=r,this.ib(a)):k(new I("ydn.db.Streamer: First argument requires storage or transaction instance required."));z(b)||k(new I("a store name required."));this.a=b;x(c)&&!z(c)&&k(new I("index name must be a string."));this.Aa=c;this.ia=r;this.X=[];this.ra=[];this.Ha=s}u=qe.prototype;u.Pa=r;u.Gb=r;u.ra=[];u.X=[];u.ia=r;u.dc=function(a){this.Gb=a};
u.ib=function(a){"db"in a?this.ia=new pe(a,this.a,this.Aa,ma(this.ba,this)):k(new I("Invalid IndexedDB Transaction."))};function re(a){var b=0<a.X.length;if(b&&!a.Ha&&B(a.Gb)){var c=function(){re(a)},d=a.ra.shift(),e=a.X.shift(),b=0<a.X.length,c=a.Gb(d,e,b?c:r);b&&!c&&re(a)}}u.Ha=s;u.uc=function(a){if(this.ia){this.Ha=n;var b=this,c=this.ia,d=function(){a(b.ra,b.X);b.ra=[];b.X=[];b.Ha=s};0==c.c.length&&0==c.b?d():c.ba=d}else a(this.ra,this.X),this.ra=[],this.X=[]};
u.ba=function(a,b){this.ra.push(a);this.X.push(b);re(this)};
u.push=function(a,b){this.Ha&&k(new W("push not allowed after a collection is started"));if(2<=arguments.length)this.ba(a,b);else{if(!this.ia){this.Pa||k(new W("Database is not setup."));var c=this.Pa.p();c?"indexeddb"===c?this.ia=new pe(this.Pa,this.a,this.Aa,ma(this.ba,this)):k(new fd(c)):k(new W("Database is not connected."))}var d=this.ia;d.c.push(a);if(!d.g){var e=function(a,b){d.e=r;"complete"!==a&&M(d.a,b.name+":"+b.message);O(d.a,d+" transaction "+a)},f=function(a){var b=d.c.shift();O(d.a,
d+" transaction started for "+b);var c=a.objectStore(d.D).openCursor(b);d.b++;c.onsuccess=function(a){if(a=a.target.result){if(B(d.ea)){var b=a.value;d.ea(a.primaryKey,d.da!=r?b[d.da]:b)}else M(d.a,"sink gone, dropping value for: "+a.primaryKey);if(a&&0<d.c.length)a["continue"](d.c.shift());else d.b--,0==d.b&&d.ba&&d.ba()}};c.onerror=function(){M(d.a,"seeking fail. "+("error"in c?c.error.name+":"+c.error.message:""));d.b--;0==d.b&&d.ba&&d.ba()}};d.e?(O(d.a,d+" using existing tx."),f(d.e)):d.i?(O(d.a,
d+" creating tx from IDBDatabase."),d.h=d.i.transaction([d.D],U),d.h.oncomplete=function(a){e("complete",a)},d.h.onerror=function(a){e("error",a)},d.h.onabort=function(a){e("abort",a)}):d.p?(O(d.a,d+" creating tx from ydn.db.con.IStorage."),d.g=n,d.p.ka(function(a){d.g=s;f(a)},[d.D],U,e)):k(new gd("no way to create a transaction provided."))}}};u.xa=t("Aa");u.toString=function(){return"Streamer:"+this.a+(this.Aa||"")};function se(a,b,c,d,e){this.ta=a;this.u=b;this.z=c;this.reverse="prev"==d||"prevunique"==d;this.$=d;this.ab=e}u=se.prototype;u.u="";u.Vb="";u.ta="";u.$="";u.z=r;u.reverse=s;u.ab=n;u.W=function(a){k(a)};u.Lb=function(){return this.u?this.S():this.o()};u.v=function(a,b,c){this.A(a,b,c)};u.A=aa();u.V=s;u.toString=function(){var a="";this.U()&&(a="{"+this.o()+":"+this.S()+"}");return"Cursor:"+this.ta+(x(this.u)?":"+this.u:"")+a};var te={};
function ue(a){a=[a];for(var b=new ve,c=0,d,e;(e=a.pop())!==l;){0===c%4&&12<c+4&&(b.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){a.push(te);for(d=e.length;d--;)a.push(e[d]);continue}else b.write(c);else if("number"===d)c+=1,b.write(c),we(b,e);else if(e instanceof Date)c+=2,b.write(c),we(b,e.valueOf());else if("string"===d){c+=3;b.write(c);c=b;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>2|255,
(f|3)<<6)}c.write(0)}else if(e===te)b.write(0);else return"";c=0}return b.trim().toString()}
function we(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function xe(a){var b=a.pa()|0,c=b>>7?s:n,d=c?-1:1,e=(b&127)<<4,b=a.pa()|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(a.pa()|0):a.pa()|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function ye(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=a.pa();if(0===f||f==r)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function ze(a){this.a=r;var b=a.length-1,c=-1;this.pa=function(){return this.a=c<b?parseInt(a[++c]+a[++c],16):r}}
function ve(){var a=[],b;this.write=function(c){for(var d=0;d<arguments.length;d++)b=arguments[d].toString(16),a.push(2===b.length?b:b="0"+b)};this.toString=function(){return a.length?a.join(""):r};this.trim=function(){for(var b=a.length;"00"===a[--b];);a.length=++b;return this}};function Ae(a,b,c,d,e){x(e)||(e=y(a)?a.join(", "):a);a!=r&&(!z(a)&&!fa(a))&&k(new I("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a));y(a)&&Object.freeze&&Object.freeze(a);!x(a)&&x(e)&&(a=e);this.keyPath=a;this.name=e;this.type=Be(b);if(!(a=y(b)&&!y(this.type))){if(a=y(b)){a:if(a=this.type,!fa(a)||!fa(b)||a.length!=b.length)a=s;else{e=a.length;for(var f=0;f<e;f++)if(a[f]!==b[f]){a=s;break a}a=n}a=!a}a=a||!y(b)&&this.type!=b}a&&k(new I("Invalid index type: "+b+" in "+this.name));
this.unique=!!c;this.multiEntry=!!d}var Ce=String.fromCharCode(31);function Q(a,b){if(y(b)){var c=a==r?[""]:y(a)?a:[a],d=c[0]instanceof Date?"d":A(c[0])?"n":"t",c="d"==d?c.reduce(function(a,b){return a+ +b},""):c.join(Ce);return d+Ce+c+Ce}if("DATE"==b){if(a instanceof Date)return+a}else return x(b)?a:"X'"+ue(a)+"'"}
function Qd(a,b){if(y(b)){if(z(a)){var c=a.split(Ce),d=c[0],c=c.slice(1,c.length-1);return Ta(c,function(a){return"d"==d?new Date(parseInt(a,10)):"n"==d?parseFloat(a):a})}}else{if("DATE"==b)c=new Date(a);else if(x(b))c=a;else{for(var e=c=[],f,g=[],h,j,m=new ze(a);m.pa()!=r;)if(0===m.a)e=g.pop();else{if(m.a===r)break;do{h=m.a/4|0;f=m.a%4;for(var p=0;p<h;p++)j=[],e.push(j),g.push(e),e=j;if(0===f&&12<m.a+4)m.pa();else break}while(1);1===f?e.push(xe(m)):2===f?e.push(new Date(xe(m))):3===f?e.push(ye(m)):
0===f&&(e=g.pop())}c=c[0]}return c}}var De=["BLOB","DATE","INTEGER","NUMERIC","TEXT"];function Be(a){if(y(a))return a=Ta(a,function(a){return Be(a)}),Object.freeze&&Object.freeze(a),a;a=xa(De,a);return De[a]}Ae.prototype.toJSON=function(){return{name:this.name,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};function Ee(a,b,c,d,e,f,g){this.name=a;z(this.name)||k(new I("store name must be a string"));this.keyPath=x(b)?b:r;this.keyPath!==r&&(!z(this.keyPath)&&!fa(this.keyPath))&&k(new I("keyPath must be a string or array"));this.autoIncrement=c;var h;x(d)&&(h=Be(d),x(h)||k(new I("type invalid in store: "+this.name)));this.type=x(h)?h:this.autoIncrement?"INTEGER":l;this.b=z(this.keyPath)?this.keyPath.split("."):[];this.indexes=e||[];this.a=!!f;this.c=!!g}Ee.prototype.a=s;Ee.prototype.c=s;
Ee.prototype.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.name,keyPath:this.keyPath,autoIncrement:this.autoIncrement,type:this.type,indexes:a}};
function he(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync".split(" "),c;for(c in a)a.hasOwnProperty(c)&&-1==xa(b,c)&&k(new I('Unknown attribute "'+c+'"'));b=[];c=a.indexes||[];if(y(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f=["name","unique","type","keyPath","multiEntry"],g=l;for(g in e)e.hasOwnProperty(g)&&-1==xa(f,g)&&k(new I("Unknown field: "+g+" in "+G(e)));e=new Ae(e.keyPath,e.type,e.unique,e.multiEntry,e.name);x(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new Ee(a.name,
a.keyPath,a.autoIncrement,a.type,b,a.dispatchEvents,a.fixed)}Ee.prototype.index=function(a){return this.indexes[a]||r};function Sd(a,b){return Wa(a.indexes,function(a){return a.name==b})}function Fe(a,b){return b==a.keyPath?n:Ua(a.indexes,function(a){return a.name==b})}function Yd(a){return z(a.keyPath)?K(a.keyPath):l}function Xd(a){return z(a.keyPath)?K(a.keyPath):"_ROWID_"}function Td(a){return z(a.keyPath)?a.keyPath:"_ROWID_"}function Ud(a){return K(a.name)}
function Wd(a,b,c){var d=[];c=x(c)?c:z(a.keyPath)?db(b,a.b):l;var e=[];x(c)&&(e=a.keyPath!=r?[Yd(a)]:["_ROWID_"],d=[Q(c,a.type)]);for(var f=0;f<a.indexes.length;f++){var g=a.indexes[f];if(!(g.name==a.keyPath||"_default_"==g.name)){var h=g.keyPath;if(x(h)){var j=g.type;if(y(h))for(var m=0;m<h.length;m++)x(b[h[m]])&&(g.multiEntry?d.push(Q(b[h[m]],[j[m]])):d.push(Q(b[h[m]],j[m])),e.push(K(h[m])));else x(b[h])&&(g.multiEntry?d.push(Q(b[h],[j])):d.push(Q(b[h],j)),e.push(K(h)))}}}if(!a.c){var f={},p;for(p in b)b.hasOwnProperty(p)&&
!Fe(a,p)&&(f[p]=b[p]);d.push(G(f));e.push("_default_")}a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Pb:e,ec:a,G:d,key:c}}
function ie(a,b){if(!b)return"missing store: "+a.name;if(a.name!=b.name)return"store name, expect: "+a.name+", but: "+b.name;if(a.keyPath!=b.keyPath)return"keyPath, expect:  "+a.keyPath+", but: "+b.keyPath;if(x(a.autoIncrement)&&x(b.autoIncrement)&&a.autoIncrement!=b.autoIncrement)return"autoIncrement, expect:  "+a.autoIncrement+", but: "+b.autoIncrement;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(x(a.type)&&x(b.type)&&a.type!=
b.type)return"data type, expect:  "+a.type+", but: "+b.type;for(var c=0;c<a.indexes.length;c++){var d=Sd(b,a.indexes[c].name),d=!d?"no index for "+a.indexes[c].name:a.indexes[c].name!=d.name?"name, expect: "+a.indexes[c].name+", but: "+d.name:!Ge(a.indexes[c].keyPath,d.keyPath)?"keyPath, expect: "+a.indexes[c].keyPath+", but: "+d.keyPath:a.indexes[c].unique!=d.unique?"unique, expect: "+a.indexes[c].unique+", but: "+d.unique:x(a.indexes[c].type)&&x(d.type)&&a.indexes[c].type!=d.type?"data type, expect: "+
a.indexes[c].type+", but: "+d.type:"";if(0<d.length)return'index "'+a.indexes[c].name+'" '+d}return""};function He(a,b){var c,d=b;if(C(a)){c=["version","stores"];for(var e in a)a.hasOwnProperty(e)&&-1==xa(c,e)&&k(new I("Unknown field: "+e+" in schema."));c=a.version;d=[];e=a.stores||[];y(e)||k(new I("stores must be array"));for(var f=0;f<e.length;f++){var g=he(e[f]);-1!=Xa(d,function(a){return a.name==g.name})&&k(new I('duplicate store name "'+g.name+'".'));d.push(g)}}else z(a)?c=0==a.length?l:parseFloat(a):A(a)&&(c=a);x(c)&&((!A(c)||0>c)&&k(new I("Invalid version: "+c+" ("+a+")")),isNaN(c)&&(c=l));
x(b)&&(!y(b)||0<b.length&&!(b[0]instanceof Ee))&&k(new I("stores"));this.version=c;this.b=!x(this.version);this.stores=d||[]}He.prototype.toJSON=function(){var a=this.stores.map(function(a){return a.toJSON()});return{version:this.version,stores:a}};He.prototype.b=s;He.prototype.a=ba(s);function ge(a){return a.stores.map(function(a){return a.name})}He.prototype.c=function(a){return this.stores[a]||r};function X(a,b){return Wa(a.stores,function(a){return a.name==b})}
function fe(a,b){return Ua(a.stores,function(a){return a.name==b})}function Ie(a,b){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var c=0;c<a.stores.length;c++){var d=X(b,a.stores[c].name),d=ie(a.stores[c],d);if(0<d.length)return'store: "'+a.stores[c].name+'" '+d}return""};function Je(a,b){x(a)&&5242880<a&&M(this.m,"storage size request ignored.");this.q=r;this.jb=b||18E4}
Je.prototype.Ba=function(a,b){function c(a,c,d){N(e.m,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)Ke(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)fe(b,c[d])||(a.deleteObjectStore(c[d]),N(e.m,"store: "+c[d]+" deleted."))}function d(a,b){x(b)?(M(e.m,b?b.message:"Error received."),e.q=r,f.f(b)):(e.q=a,e.q.onabort=function(a){O(e.m,e+": onabort - "+a.message)},e.q.onerror=function(a){O(e.m,e+": onerror - "+a.message)},e.q.onversionchange=
function(a){O(e.m,e+": onversionchange to: "+a.version);e.q&&(e.q.onabort=r,e.q.onerror=r,e.q.onversionchange=r,e.q.close(),e.q=r,B(e.b)&&e.b())},T(f,parseFloat(g)))}var e=this,f=new S,g=l,h=b.version;N(e.m,"Opening database: "+a+" ver: "+(b.b?"auto":h));var j;j=x(h)?Le.open(a,h):Le.open(a);j.onsuccess=function(f){var h=f.target.result;x(g)||(g=h.version);N(e.m,"Database: "+h.name+", ver: "+h.version+" opened.");if(b.b)e.Z(function(f){if(b.a())for(var g=0;g<f.stores.length;g++)if(!fe(b,f.stores[g].name)){var j=
he(f.stores[g].toJSON());b.stores.push(j)}f=Ie(b,f);if(0<f.length){N(e.m,"Schema change require for difference in "+f);var m=A(h.version)?h.version+1:1;if("IDBOpenDBRequest"in w){h.close();var q=Le.open(a,m);q.onupgradeneeded=function(a){a=a.target.result;N(e.m,"re-open for version "+a.version);c(a,q.transaction,s)};q.onsuccess=function(a){d(a.target.result)};q.onerror=function(){N(e.m,e+": fail.");d(r)}}else{var ca=h.setVersion(m+"");ca.a=function(a){M(e.m,"migrating from "+h.version+" to "+m+" failed.");
d(r,a)};ca.onsuccess=function(){ca.transaction.oncomplete=Va;c(h,ca.transaction,n)};var Va=function(){var b=Le.open(a);b.onsuccess=function(a){a=a.target.result;N(e.m,e+": OK.");d(a)};b.onerror=function(){N(e.m,e+": fail.");d(r)}};ca.transaction!=r&&(ca.transaction.oncomplete=Va)}}else d(h)},l,h);else if(b.version>h.version){var j=h.setVersion(b.version);j.a=function(a){M(e.m,"migrating from "+h.version+" to "+b.version+" failed.");d(r,a)};j.onsuccess=function(){c(h,j.transaction,n)}}else b.version==
h.version?N(e.m,"database version "+h.version+" ready to go"):M(e.m,"connected database version "+h.version+" is higher than requested version."),e.Z(function(a){a=Ie(b,a);0<a.length?(N(e.m,a),d(r,new hd("different schema: "+a))):d(h)},l,h)};j.onupgradeneeded=function(a){a=a.target.result;g=NaN;N(e.m,"upgrade needed for version "+a.version);c(a,j.transaction,s)};j.onerror=function(c){Wb(e.m,"opening database "+a+":"+b.version+" failed.");d(r,c)};j.onblocked=function(c){Wb(e.m,"database "+a+" "+b.version+
" block, close other connections.");d(r,c)};A(this.jb)&&Id(function(){"done"!=j.readyState&&(Wb(e.m,e+": database state is still "+j.readyState),d(r,Error("connection timeout after "+e.jb)))},this.jb);return f};var Le=w.indexedDB||w.mozIndexedDB||w.webkitIndexedDB||w.moz_indexedDB||w.msIndexedDB;u=Je.prototype;u.jb=18E4;u.Ca=ba("indexeddb");u.Hb=function(){return this.q||r};u.Jb=function(){return!!this.q};u.m=P("ydn.db.con.IndexedDb");u.q=r;
u.Ib=function(){return this.q?parseFloat(this.q.version):l};
u.Z=function(a,b,c){c=c||this.q;if(x(b)){if(b===r){if(0==c.objectStoreNames.length){a(new He(c.version));return}k(new gd)}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new He(c.version));return}b=c.transaction(b,U)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var h=b.objectStore(e[d]),j=[],m=0,p=h.indexNames.length;m<p;m++){var q=h.index(h.indexNames[m]);j[m]=new Ae(q.keyPath,l,q.unique,q.multiEntry,q.name)}f[d]=new Ee(h.name,
h.keyPath,h.autoIncrement,l,j)}b=new He(c.version,f);a(b)};
function Ke(a,b,c,d){function e(){var a={autoIncrement:!!d.autoIncrement};d.keyPath!=r&&(a.keyPath=d.keyPath);try{return b.createObjectStore(d.name,a)}catch(c){"InvalidAccessError"==c.name&&k(new Wc("creating store for "+d.name+" of keyPath: "+d.keyPath+" and autoIncrement: "+d.autoIncrement)),"ConstraintError"==c.name&&k(new hd("creating store for "+d.name)),k(c)}}O(a.m,"Creating Object Store for "+d.name+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.name))if(c=c.objectStore(d.name),(d.keyPath||
"")!=(c.keyPath||""))b.deleteObjectStore(d.name),M(a.m,"store: "+d.name+" deleted due to keyPath change."),c=e();else if(ga(c.autoIncrement)&&ga(d.autoIncrement)&&c.autoIncrement!=d.autoIncrement)b.deleteObjectStore(d.name),M(a.m,"store: "+d.name+" deleted due to autoIncrement change."),c=e();else{for(var f=c.indexNames,g=0,h=0,j=0;j<d.indexes.length;j++){var m=d.indexes[j];if(!f.contains(m.name)){if(m.unique||m.multiEntry){var p={unique:m.unique,multiEntry:m.multiEntry};c.createIndex(m.name,m.keyPath,
p)}else c.createIndex(m.name,m.keyPath);g++}}for(j=0;j<f.length;j++)Fe(d,f[j])||(c.deleteIndex(f[j]),h++);O(a.m,"Updated store: "+c.name+", "+g+" index created, "+h+" index deleted.")}else{c=e();for(j=0;j<d.indexes.length;j++)m=d.indexes[j],O(a.m,"Creating index: "+m.name+" multiEntry: "+m.multiEntry),m.unique||m.multiEntry?(p={unique:m.unique,multiEntry:m.multiEntry},c.createIndex(m.name,m.keyPath,p)):c.createIndex(m.name,m.keyPath);O(a.m,"Created store: "+c.name+" keyPath: "+c.keyPath)}}
u.Va=function(a,b,c,d){var e=this.q;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(r):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onerror=function(a){d("error",a)},b.onabort=function(a){d("abort",a)},a(b),a=r)};u.kb=function(){this.q.close()};u.toString=function(){return this.Ca()+":"+(this.q?this.q.name+":"+this.q.version:"")};function Me(a){this.a=x(a)?a:4194304}u=Me.prototype;
u.Ba=function(a,b){function c(a,b){x(b)?(d.F=r,f.f(b)):(d.F=a,T(f,parseFloat(e)))}var d=this,e=NaN,f=new S,g=r;try{var h=b.b?"":b.version+"",g=w.openDatabase(a,"",a,this.a)}catch(j){"SECURITY_ERR"==j.name?(M(this.s,"SECURITY_ERR for opening "+a),g=r,this.Kb=new $c(j)):k(j)}if(g){e=g.version;g.version===h?O(this.s,"Existing database version "+g.version+" opened."):O(d.s,"Database version "+g.version+" opened, but require "+h+" version.");!b.b&&g.version<h&&O(d.s,"Upgrading to version: "+h);var m=g;
O(d.s,a+": setting version from "+m.version+" to "+b.version);var p=s,q=0;m.transaction(function(a){d.Z(function(c){p=n;for(var e=0;e<b.stores.length;e++){var f=c,g=b.c(e),f=X(f,g.name);Ne(d,a,b.c(e),function(){q++},f)}if(b instanceof Oe)for(e=0;e<c.stores.length;e++)f=c.c(e),fe(b,f.name)||b.stores.push(f)},a,m)},function(a){k(a)},function(){if(p){var e=".";q!=b.stores.length&&(e=" but unexpected stores exists.");O(d.s,a+":"+m.version+" ready"+e);c(m)}else M(d.s,a+": setting version voided.")})}else c(r,
this.Kb);return f};u.Ca=ba("websql");u.Kb=r;u.F=r;u.Hb=function(){return this.F||r};u.s=P("ydn.db.con.WebSql");u.Ib=function(){return this.F?parseFloat(this.F.version):l};
u.Z=function(a,b,c){function d(a,b){k(b)}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var v;v="sql"in e?e.sql:l;O(f.s,"Parsing table schema from SQL: "+v);v=v.substr(v.indexOf("("),v.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g);for(var J=l,E,H=[],Da=s,ca=s,Va=0;Va<v.length;Va++){var ya=v[Va].match(/\w+|"[^"]+"/g),$=Ta(ya,function(a){return a.toUpperCase()}),ya=La(ya[0],'"'),
Fa=Be($[1]);-1!=$.indexOf("PRIMARY")&&-1!=$.indexOf("KEY")?(/^[\s\xa0]*$/.test(ya)||(J=ya),E=Fa,-1!=$.indexOf("AUTOINCREMENT")&&(Da=n)):"_default_"==ya?ca=n:($=new Ae(ya,Fa,"UNIQUE"==$[2]),H.push($))}e=new Ee(e.name,J,Da,E,H,l,!ca);h.push(e)}}d=new He(g,h);a(d)}}var f=this,g=(c=c||this.F)&&c.version?parseInt(c.version,10):l,g=isNaN(g)?l:g,h=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.Z(a,b,c)},function(a){Wb(f.s,"opening tx: "+a.message);k(a)},e)};
function Ne(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==h.length&&d(n)},function(b,d){k(new Zc(d,"Error creating table: "+c.name+" "+a))})}var g=0,h,j="CREATE TABLE IF NOT EXISTS "+Ud(c)+" (";Yd(c);var m=[],p=c.type||"BLOB";y(p)&&(p="TEXT");c.keyPath!=r?(j+=Yd(c)+" "+p+" UNIQUE PRIMARY KEY ",c.autoIncrement&&(j+=" AUTOINCREMENT "),m.push(c.keyPath)):j=c.autoIncrement?j+("_ROWID_ "+p+" UNIQUE PRIMARY KEY AUTOINCREMENT "):j+("_ROWID_ "+p+" UNIQUE PRIMARY KEY ");for(var j=j+" ,_default_ BLOB",
p=[],q=0;q<c.indexes.length;q++){var v=c.indexes[q],J=v.unique?" UNIQUE ":" ";if(v.keyPath!=c.keyPath)if(y(v.type))for(var J=v.type,v=v.keyPath,E=0;E<v.length;E++)0<=m.indexOf(v[E])||(j+=", "+K(v[E])+" "+J[E],m.push(v[E]));else-1==m.indexOf(v.keyPath)&&(E=v.keyPath,j+=", "+K(E)+" "+v.type+J,m.push(E))}p.unshift(j+");");h=p;j="Create";e&&(0==ie(c,e).length?(O(a.s,c.name+" exists."),d(n)):(j="Modify",M(a.s,"table: "+c.name+" has changed,but TABLE ALTERATION is not implemented, dropping old table."),
h.unshift("DROP TABLE "+K(c.name))));O(a.s,j+" table: "+c.name+": "+h.join(";"));for(a=0;a<h.length;a++)f(h[a])}u.Jb=function(){return!!this.F};u.kb=aa();u.Va=function(a,b,c,d){function e(a){O(h.s,h+": Tx "+c+" request cause error.");d("error",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var h=this;this.F===r&&(a(r),d("error",this.Kb));c==U?this.F.readTransaction(g,e,f):c==Ic?this.F.changeVersion(this.F.version,this.F.version+1+"",g,e,f):this.F.transaction(g,e,f)};var R=Le&&Le.cmp?ma(Le.cmp,Le):function(a,b){var c=ue(a),d=ue(b);return c>d?1:c==d?0:-1};function Pe(a,b){a!=r&&!("push"in a)&&k(new dd);this.a=a||r;this.i=b;this.g=0}Pe.prototype.p=P("ydn.db.algo.AbstractSolver");Pe.prototype.a=r;Pe.prototype.b=function(a){y(a)||k(new TypeError("iterators must be array"));2>a.length&&k(new RangeError("ZigzagMerge require at least 2 iterators, but  only "+a.length+" found."));for(var b=0;b<a.length;b++)a[b]instanceof V||k(new TypeError("item at iterators "+b+" is not an iterator."));return s};Pe.prototype.c=function(){return[]};function Qe(a,b,c,d,e,f){se.call(this,b,c,d,e,f);this.oa=a;this.index=r;c!=r&&(a.indexNames.contains(c)?this.index=a.index(c):a.keyPath!=c&&k(new Uc('index "'+c+'" not found in '+a.name)));this.R=this.K=this.r=r;this.Y=s}F(Qe,se);u=Qe.prototype;u.Qa=P("ydn.db.index.req.IDBCursor");u.oa=r;u.index=r;u.r=r;
u.zc=function(a){var b="IDBCursor: "+this.ta+":"+this.u;if(this.r=a=a.target.result){if(this.R!=r){b=Le.cmp(a.key,this.R);if(1===b){this.R=this.K=r;this.v(a.primaryKey,a.key,a.value);return}if(0===b)this.R=r;else{a["continue"]();return}}if(this.K!=r)if(b=Le.cmp(this.K,a.primaryKey),0===b)this.K=r,this.Y?(this.Y=s,a["continue"]()):this.v(a.primaryKey,a.key,a.value);else if(1===b)a["continue"]();else this.K=r,this.v(a.primaryKey,a.key,a.value);else this.v(a.primaryKey,a.key,a.value)}else this.K=this.R=
r,this.Y=s,O(this.Qa,b+" completed."),this.v(l,l,l)};u.K=r;u.R=r;u.Y=s;
u.za=function(a,b,c){var d="IDBCursor: "+this.ta+":"+this.u;this.K=a;this.R=b;this.Y=!!c;a=this.z;if(b!=r)if(this.z!=r){a=Le.cmp(b,this.z.lower);if(this.reverse&&1==a){O(this.Qa,d+" not opened, index key in reverse out of range "+b+">"+this.z.lower);this.A(l,l,l);return}if(!this.reverse&&-1==a){O(this.Qa,d+" not opened, index key out of range "+b+"<"+this.z.lower);this.A(l,l,l);return}a=va.bound(b,this.z.upper,s,this.z.upperOpen)}else a=va.lowerBound(b);b=this.ab?this.index?this.$!=r?this.index.openKeyCursor(a,
this.$):a!=r?this.index.openKeyCursor(a):this.index.openKeyCursor():this.$!=r?this.oa.openCursor(a,this.$):a!=r?this.oa.openCursor(a):this.oa.openCursor():this.index?this.$!=r?this.index.openCursor(a,this.$):a!=r?this.index.openCursor(a):this.index.openCursor():this.$!=r?this.oa.openCursor(a,this.$):a!=r?this.oa.openCursor(a):this.oa.openCursor();O(this.Qa,d+" opened, request "+b.readyState);b.onsuccess=ma(this.zc,this);b.onerror=ma(this.W,this)};u.U=function(){return!!this.r};u.S=function(){return this.r.key};
u.o=function(){return this.r.primaryKey};u.aa=function(){return this.r.value};u.Mb=function(a){if(this.r){var b=new S;a=this.r.update(a);a.onsuccess=function(a){T(b,a.target.result)};a.onerror=function(a){b.f(a)};return b}k(new Wc("cursor gone"))};u.clear=function(){if(this.r){var a=new S,b=this.r["delete"]();b.onsuccess=function(){T(a,1)};b.onerror=function(b){a.f(b)};return a}k(new Wc("cursor gone"))};u.gb=function(a,b){O(this.Qa,this+" restarting.");this.za(b,a,n)};
u.advance=function(a){this.r||k(new W(this+" cursor gone."));this.K=this.R=r;this.Y=s;if(1==a)this.r["continue"]();else this.r.advance(a)};u.Ta=function(a){this.r||k(new W(this+" cursor gone."));this.u?(this.R=r,this.K=a,this.Y=s,this.r["continue"]()):(this.K=this.R=r,this.Y=s,this.r["continue"](a))};u.I=function(a){this.r||k(new W(this+" cursor gone."));this.K=this.R=r;this.Y=s;if(a!=r)this.r["continue"](a);else this.r["continue"]()};u.toString=function(){return"IDBCursor: "+this.ta+":"+this.u};function Re(a,b){cd.call(this,a,b)}F(Re,jd);u=Re.prototype;u.d=P("ydn.db.index.req.IndexedDb");u.n=t("h");u.Yb=function(a,b,c,d){var e=[],f="keysByIterator:"+b,g=this;O(this.d,f);var h=Rc(b,this);h.W=function(b){M(g.d,"error:"+f);a.f(b)};var j=0,m=s;h.A=function(p,q){x(q)?!m&&0<d?(h.advance(d),m=n):(j++,e.push(q),!x(c)||j<c?h.I():(Qc(b),O(g.d,"success:"+f),T(a,e))):(O(g.d,"success:"+f),T(a,e))}};
u.ya=function(a,b,c,d){var e=[],f="listByIterator"+b,g=this;O(this.d,f);var h=Rc(b,this);h.W=function(b){M(g.d,"error:"+f);a.f(b)};var j=0,m=s;h.A=function(p,q,v){x(q)?!m&&0<d?(h.advance(d),m=n):(j++,e.push(b.H?p:v),!x(c)||j<c?h.I():(Qc(b),O(g.d,"success:"+f),T(a,e))):(O(g.d,"success:"+f),T(a,e))}};u.Ya=function(a,b,c,d,e){var f=this.n().objectStore(a);return new Qe(f,a,b,c,d,e)};function Se(a,b,c,d,e,f,g,h){se.call(this,c,d,f,g,h);this.h=a;this.Vb=e;this.a=b;this.N=r;this.w=NaN}F(Se,se);u=Se.prototype;u.ua=P("ydn.db.index.req.WebsqlCursor");u.N=r;u.w=NaN;
u.za=function(a,b,c){var d=this.z;if(this.u&&b!=r)if(this.z!=r){d=Le.cmp(b,this.z.upper);if(1==d||0==d&&!this.z.upperOpen){this.A(l,l,l);return}d=va.bound(b,this.z.upper,s,this.z.upperOpen)}else d=va.lowerBound(b);var e=this,f=["SELECT"];b=[];var g=Td(this.a),h=this.u?Sd(this.a,this.u):r,j=h?h.type:this.a.type,m=h?h.keyPath:this.a.keyPath||g,p=K(g),g=" ORDER BY ";if(this.ab)if(y(j)){for(var q=[],v=[],J=0;J<m.length;J++){var E=K(m[J]);q.push(E);E=this.reverse?E+" DESC":E+" ASC";v.push(E)}h&&(q.push(p),
v.push(p+this.reverse?" DESC":" ASC"));f.push(q.join(", "));g+=v.join(", ")}else h?(f.push(K(m)+", "+p),g+=this.reverse?K(m)+" DESC, "+p+" DESC ":K(m)+" ASC, "+p+" ASC "):(f.push(p),g=g+p+(this.reverse?" DESC":" ASC"));else f.push("*"),h?g+=this.reverse?K(m)+" DESC, "+p+" DESC ":K(m)+" ASC, "+p+" ASC ":(g+=p,g+=this.reverse?" DESC":" ASC");f.push("FROM "+K(this.ta));d=vc(m,j,d);d.sql&&(f.push("WHERE "+d.sql),b=b.concat(d.params));f.push(g);this.V=n;d=f.join(" ");O(e.ua,this+": opened: "+d+" : "+G(b));
this.h.executeSql(d,b,function(b,d){e.V=s;e.N=d;e.w=0;if(e.u&&a!=r)for(var f=R(e.o(),a);-1==f||0==f&&c;)e.w++,f=R(e.o(),a);e.v(e.o(),e.S(),e.aa())},function(a,b){e.V=s;M(e.ua,"get error: "+b.message);e.W(b);return n})};u.U=function(){return!!this.N&&this.w<this.N.rows.length};u.S=function(){if(this.u&&this.w<this.N.rows.length){var a=this.N.rows.item(this.w),b;b=Sd(this.a,this.u).type;if(y(b)){for(var c=this.Vb,d=[],e=0;e<c.length;e++)d[e]=Qd(a[c[e]],b[e]);return d}return Qd(a[this.u],b)}};
u.o=function(){if(this.w<this.N.rows.length){var a=Td(this.a),b=this.N.rows.item(this.w);return Qd(b[a],this.a.type)}};u.aa=function(){if(this.w<this.N.rows.length&&!this.ab){var a=this.N.rows.item(this.w);return Pd(a,this.a)}};
u.clear=function(a){this.U()||k(new Wc);a&&k(new fd);var b=new S,c=this;this.V=n;a=Td(this.a);a="DELETE FROM "+Ud(this.a)+" WHERE "+a+" = ?";var d=[this.o()];O(c.ua,this+': clear "'+a+'" : '+G(d));this.h.executeSql(a,d,function(a,d){c.V=s;T(b,d.rowsAffected)},function(a,d){c.V=s;M(c.ua,"get error: "+d.message);b.f(d);return n});return b};
u.Mb=function(a,b){this.U()||k(new Wc);b&&k(new fd);var c=new S,d=this;this.V=n;var e=this.o(),f=Wd(d.a,a,e),g="REPLACE INTO "+Ud(this.a)+" ("+f.Pb.join(", ")+") VALUES ("+f.ec.join(", ")+") ON CONFLICT FAIL";O(d.ua,this+': clear "'+g+'" : '+G(f.G));this.h.executeSql(g,f.G,function(){d.V=s;T(c,e)},function(a,b){d.V=s;M(d.ua,"get error: "+b.message);c.f(b);return n});return c};u.gb=function(a,b){O(this.ua,this+" restarting.");this.za(b,a,n)};
u.advance=function(a){this.U()||k(new W(this+" cursor gone."));this.w+=a;this.v(this.o(),this.S(),this.aa())};
u.Ta=function(a){this.U()||k(new W(this+" cursor gone."));var b=R(a,this.o());(0==b||1==b&&this.reverse||-1==b&&!this.reverse)&&k(new W(this+" wrong direction."));for(var c=this.S(),d=this.N.rows.length,e=0;e<d;e++){if(0==b||1==b&&this.reverse||-1==b&&!this.reverse){this.v(this.o(),this.S(),this.aa());return}this.w++;if(c&&c!=this.S()){this.v(this.o(),this.S(),this.aa());return}b=this.o();b=b!=r?R(a,b):1}this.v(l,l,l)};
u.I=function(a){this.U()||k(new W(this+" cursor gone."));var b=R(a,this.Lb());(0==b||1==b&&this.reverse||-1==b&&!this.reverse)&&k(new W(this+" wrong direction."));for(var c=this.N.rows.length,d=0;d<c;d++){if(0==b||1==b&&this.reverse||-1==b&&!this.reverse){this.v(this.o(),this.S(),this.aa());return}this.w++;b=this.Lb();b=b!=r?R(a,b):1}this.v(l,l,l)};u.toString=function(){return"WebsqlCursor: "+this.ta+":"+this.u};function Te(a,b){cd.call(this,a,b)}F(Te,Nd);Te.prototype.d=P("ydn.db.index.req.WebSql");Te.prototype.Yb=function(a,b,c,d){Ue(this,a,b,n,c,d)};Te.prototype.ya=function(a,b,c,d){Ue(this,a,b,s,c,d)};
function Ue(a,b,c,d,e,f){O(a.d,"fetchIterator:"+c);var g=X(a.a,c.M),h=c.xa(),j=x(h)?Sd(g,h):r,h=j?j.keyPath:g.keyPath!=r?g.keyPath:"_ROWID_",m=K(h),p=j?j.type:g.type,j="*";d?j=m:c.H&&(j=Xd(g));var j=j+" FROM "+Ud(g),q="",v=[],J=vc(h,p,c.gc());J.sql&&(q="WHERE "+J.sql,v=J.params);J="ASC";c.hc()&&(J="DESC");m="ORDER BY "+m;if(y(h))for(var m="ORDER BY ",E="",H=0;H<h.length;H++)m+=E+'"'+K(h[H])+'"',E=", ";h="";x(e)&&(h=" LIMIT "+e);x(f)&&(h+=" OFFSET "+f);var Da=["SELECT",j,q,"",m,J,h].join(" "),ca;ca=
d||c.H?function(a){return Qd(Ve(a),p)}:function(a){return Pd(a,g)};O(a.d,"SQL: "+Da+" PARAMS: "+v);a.h.executeSql(Da,v,function(c,d){for(var e=[],f=d.rows.length,g=0;g<f;g++){var h=d.rows.item(g);e.push(ca(h))}O(a.d,"success "+Da);T(b,e)},function(c,d){M(a.d,"error: "+Da+" "+d.message);b.f(d);return n})}Te.prototype.Ya=function(a,b,c,d,e){var f=X(this.a,a),g=b;b&&(g=Sd(f,b).keyPath);return new Se(this.n(),f,a,b,g,c,d,e)};function We(a,b){cd.call(this,a,b)}F(We,Jd);function Xe(a,b,c){de.call(this,a,b,c)}F(Xe,ee);u=Xe.prototype;u.l=P("ydn.db.index.DbOperator");u.Ea=function(a,b){var c=this;if(a instanceof V){var d=Ec(),e=a.M,f=X(this.b,e);f||k(new I('store "'+e+'" not found.'));var g=a.xa();x(g)&&!Fe(f,g)&&k(new I('index "'+g+'" not found in store "'+e+'".'));var h=new S;h.O(function(a){T(d,a[0])},function(a){d.f(a)});O(this.l,"listByIterator:"+a);this.a.k(function(b){c.j(b).ya(h,a,1,0)},[e],U,"getByIterator");return d}return Xe.ha.Ea.call(this,a,b)};
u.keys=function(a,b,c,d,e){var f=this;if(a instanceof V){var g=Ec(),h=100;A(b)?(h=b,1>h&&k(new I("limit must be a positive value, but "+b))):x(b)&&k(new I("limit must be a number,  but "+b));var j=0;A(c)?j=c:x(c)&&k(new I("offset must be a number,  but "+c));O(this.l,"keysByIterator:"+a);this.a.k(function(b){f.j(b).Yb(g,a,h,j)},a.stores(),U,"listByIterator");return g}return Xe.ha.keys.call(this,a,b,c,d,e)};
u.Da=function(a,b,c){var d=this;if(a instanceof V){(x(b)||x(c))&&k(new I("too many arguments."));var e=Ec();O(this.l,"countKeyRange:"+a);this.a.k(function(b){d.j(b).va(e,a.M,a.L,a.xa())},a.stores(),U,"countByIterator");return e}return Xe.ha.Da.call(this,a,b,c)};
u.G=function(a,b,c,d,e){var f=this;if(a instanceof V){var g=Ec(),h;A(b)?(h=b,1>h&&k(new I("limit must be a positive value, but "+h))):x(b)&&k(new I("limit must be a number, but "+b));var j;A(c)?j=c:x(c)&&k(new I("offset must be a number, but "+c));O(this.l,"listByIterator:"+a);this.a.k(function(b){f.j(b).ya(g,a,h,j)},a.stores(),U,"listByIterator");return g}return Xe.ha.G.call(this,a,b,c,d,e)};
u.lc=function(a,b,c){var d=Ec();y(a)||k(new TypeError("First argument must be array."));for(var e=0;e<a.length;e++){var f=a[e]instanceof qe;!(a[e]instanceof V)&&!f&&k(new TypeError("Iterator at "+e+" must be cursor range iterator or streamer."))}f=[];for(e=0;e<a.length;e++)for(var g=a[e].stores(),h=0;h<g.length;h++)0<=xa(f,g[h])||f.push(g[h]);O(this.l,this+": scan for "+a.length+" iterators on "+f);for(var j=c||[],e=0;e<j.length;e++)c=j[e].a,0<=xa(f,c)||f.push(c);var m=this;this.a.k(function(c){function e(){for(var b=
0,d=0;d<a.length;d++){var j=a[d],q=Rc(j,m.j(c));q.W=f;q.A=na(g,b);Pc[d]=q;ya[b]=d;b++;for(var q=0,H=j.eb.length+1-1;q<H;q++){var ec;ec=m.j(c);ec=new qe(ec.n(),j.eb[q],j.sc[q]);ec.dc(na(h,b));Jb.push(ec);Va[b]=Jb.length;b++}}ca=a.length+Jb.length}function f(a){Ya(Pc);Ya(Jb);d.f(a)}function g(b,c,d,e){Da&&k(new gd);Kb++;var f=a[ya[b]];z(f.index)?f.H?($[b]=d,Fa[b]=c):($[b]=d,Fa[b]=e):f.H?($[b]=c,Fa[b]=c):($[b]=c,Fa[b]=e);b=Va[b];c=0;for(f=f.eb.length+1-1;c<f;c++){var h=Jb[b+c],j=d,m=e;x(h.b)?h.push(m):
h.push(j)}Kb===ca&&H()}function h(a,b,c){Da&&k(new gd);$[a]=b;Fa[a]=c;Kb++;Kb===ca&&H();return s}function H(){var c;c=b instanceof Pe?b.c($,Fa):b($,Fa);var e=[],f=[],g=[],h=[];if(y(c))for(var j=0;j<c.length;j++)c[j]===n?g[j]=1:c[j]===s?h[j]=n:f[j]=c[j];else if(c===r)e=[];else if(x(c))C(c)?(e=c.continuePrimary||[],f=c["continue"]||[],g=c.advance||[],h=c.restart||[]):k(new id("scan callback output"));else{e=[];for(j=0;j<a.length;j++)x(ya[j])&&(g[j]=1)}for(j=Kb=c=0;j<a.length;j++)e[j]==r&&(f[j]==r&&
h[j]==r&&g[j]==r)&&Kb++;for(j=0;j<a.length;j++)if(e[j]!=r||f[j]!=r||h[j]!=r||g[j]!=r){var p=ya[j];x(p)||k(new id(j+" is not an iterator."));var p=a[p],q=Pc[j];$[j]==r&&(g[j]===n||f[j]!=r||e[j]!=r)&&k(new W(p+" at "+j+" must not advance."));$[j]=l;Fa[j]=l;h[j]!=r?q.gb():f[j]!=r?q.I(f[j]):e[j]!=r?q.Ta(e[j]):g[j]!=r?q.advance(1):k(new gd(p+": has no action"));c++}if(0==c){for(e=0;e<a.length;e++)Qc(a[e]);Da=n;Ya(Pc);Ya(Jb);O(m.l,m+": scanning finished.");T(d)}}O(m.l,m+": scanning started.");for(var Da=
s,ca,Va=[],ya=[],$=[],Fa=[],Pc=[],Jb=[],Kb=0,Od=0;Od<j.length;Od++)j[Od].ib(this.n());b instanceof Pe?b.b(a,function(){e()})||e():e()},f,U,"join");return d};
u.Fa=function(a,b,c){a instanceof V||k(new I("First argument must be cursor range iterator."));X(this.b,a.M)||k(new I('Store "'+a.M+'" not found.'));c=c||U;var d=this,e=Ec();O(this.l,"open:"+c+" "+a);this.a.k(function(c){var g=Rc(a,d.j(c));g.W=function(a){e.f(a)};g.A=function(a){a!=r?(a=b(g),a===n?g.gb(r,r):C(a)?a.restart===n?g.gb(a["continue"],a.continuePrimary):a["continue"]!=r?g.I(a["continue"]):a.continuePrimary!=r?g.Ta(a.continuePrimary):T(e):g.advance(1)):T(e)}},a.stores(),c,"open");return e};
u.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)e||k(new I('Store "'+e+'" not found.'));var g=Ec();O(this.l,"map:"+a);this.a.k(function(d){var e=Rc(a,c.j(d));e.W=function(a){g.f(a)};e.A=function(c,d,f){c!=r?(c=b(a.H?z(a.index)?d:c:z(a.index)?c:f),x(c)?(ga(c)&&k(new TypeError),c===r?T(g,l):e.I(c)):e.advance(1)):T(g,l)}},d,U,"map");return g};
u.reduce=function(a,b,c){for(var d=this,e=a.stores(),f,g=0;f=e[g];g++)f||k(new I('Store "'+f+'" not found.'));var h=Ec(),j=C(c)?ta(G(c)):c;O(this.l,"reduce:"+a);this.a.k(function(c){var e=Rc(a,d.j(c));e.W=function(a){h.f(a)};var f=0;e.A=function(c,d,g){c!=r?(j=b(j,a.H?z(a.index)?d:c:z(a.index)?c:g,f++),e.advance(1)):T(h,j)}},e,U,"map");return h};function Ge(a,b){var c;c=c||{};if(a==r||b==r)return s;if(y(a)&&y(b)){if(a.length!=b.length)return s;for(var d=0;d<a.length;d++)if(-1==Wa(b,function(b){return Ge(b,a[d])}))return s;return n}if(y(a))return 1==a.length&&Ge(a[0],b);if(y(b))return 1==b.length&&Ge(b[0],a);if(C(a)&&C(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Ge(a[e],b[e]);if(!f)return s}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Ge(a[e],b[e]),!f))return s;return n}return a===b}
function Ve(a){for(var b in a)if(a.hasOwnProperty(b))return a[b]};function Ye(a){this.a=a}Ye.prototype.a=[];
Ye.prototype.b=function(a,b){for(var c=[],d=0;d<this.a.length;d++){var e=this.a[d],f="'"===e[0]&&"'"===e[e.length-1];if('"'===e[0]&&'"'===e[e.length-1])e=db(a,La(e,'"').split(".")),c.push(e);else if(f)c.push(La(e,"'"));else if(z(e))if("true"===e)c.push(n);else if("false"===e)c.push(s);else if("Date"===e)c.push(new Date(parseInt(c.pop(),10)));else if("now"===e)c.push(new Date);else if("!"===e)c[c.length-1]=!c[c.length-1];else if("=="===e)c.push(c.pop()==c.pop());else if("==="===e)c.push(c.pop()===
c.pop());else if("!="===e)c.push(c.pop()!=c.pop());else if("!=="===e)c.push(c.pop()!==c.pop());else if("<="===e)c.push(c.pop()<=c.pop());else if("<"===e)c.push(c.pop()<c.pop());else if(">="===e)c.push(c.pop()>=c.pop());else if(">"===e)c.push(c.pop()>c.pop());else if("&"===e)c.push(c.pop()&c.pop());else if("|"===e)c.push(c.pop()|c.pop());else if("?"===e){var e=!!c.pop(),f=c.pop(),g=c.pop(),e=e?f:g;c.push(e)}else"+"===e?c.push(c.pop()+c.pop()):"-"===e?c.push(c.pop()-c.pop()):"*"===e?c.push(c.pop()*
c.pop()):"/"===e?c.push(c.pop()/c.pop()):"%"===e?c.push(c.pop()%c.pop()):"at"===e?(f=c.pop(),e=c.pop(),c.push(e[f])):"of"===e?(f=c.pop(),e=c.pop(),e=y(e)?e.indexOf(f):-1,c.push(e)):"in"===e?(f=c.pop(),e=c.pop(),e=y(e)?0<=e.indexOf(f):s,c.push(e)):"abs"===e?c[c.length-1]=Math.abs(c[c.length-1]):"$"==e[0]&&/^\$\d$/.test(e)?(e=parseInt(e.match(/^\$(\d)$/)[1],10),c.push(arguments[e])):c.push(parseFloat(e));else c.push(e)}return c[0]};
Ye.prototype.c=function(){return function(){var a=2<arguments.length?Array.prototype.slice(arguments,2):l;return Ye.prototype.b.apply(r,a)}};Ye.prototype.toJSON=function(){return{Tokens:ta(G(this.a))}};function Ze(a){z(a)||k(new dd);this.Q=a;$e(this,a);this.Oa=""}u=Ze.prototype;u.Q="";u.La=U;u.$b=NaN;u.bc=NaN;u.Eb=s;u.Oa="";
function $e(a,b){var c=b.split(/\sFROM\s/i);2!=c.length&&k(new ad("FROM required."));var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);3!=c.length&&k(new ad("Unable to parse: "+b));a.c=c[1].toUpperCase();"SELECT"==a.c?a.La=U:"INSERT"==a.c?a.La=Hc:"UPDATE"==a.c?a.La=Hc:"DELETE"==a.c?a.La=Hc:k(new ad("Unknown SQL verb: "+a.c));var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.e=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.e=l;"("==c.charAt(0)&&
(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-1):new ad("missing closing parentheses"));a.D=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.a=d.substring(c),d=d.substring(0,c)):a.a="";c=d.search(/WHERE/i);0<c?(a.g=d.substring(c+6).trim(),d=d.substring(0,c)):a.g="";a.b=d.trim().split(",").map(function(a){a=La(a,'"');a=La(a,"'");return a.trim()})}
u.parse=function(a){if(a){for(var b=0;b<a.length;b++)this.Q=this.Q.replace("?",a[b]);$e(this,this.Q)}this.i=af(this);if(!this.i)return this.Oa;a=this.a.length;if(b=/OFFSET\s+(\d+)/i.exec(this.a))this.bc=parseInt(b[1],10),a=this.a.search(/OFFSET/i);if(b=/LIMIT\s+(\d+)/i.exec(this.a))this.$b=parseInt(b[1],10),b=this.a.search(/LIMIT/i),b<a&&(a=b);(a=/ORDER BY\s+(.+)/i.exec(this.a.substr(0,a)))?(a=a[1].trim(),(b=a.match(/(ASC|DESC)/i))?(this.Eb="DESC"==b[0].toUpperCase(),a=a.replace(/\s+(ASC|DESC)/i,
"")):this.Eb=s,this.p=La(La(a,'"'),"'")):this.p=l;return""};function bf(a){if("*"==a.D)return r;a=a.D.split(",");return a=a.map(function(a){return a.trim()})}u.toJSON=function(){return{sql:this.Q}};
function af(a){function b(a){return Xa(c,function(b){return b.ja==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.g.length)for(var e=a.g.split("AND"),f=0;f<e.length;f++){var g=e[f],h=d.exec(g);if(h){var j=h[1].trim(),j=La(j,'"'),j=La(j,"'");if(0<j.length){var m=h[3].trim(),m=0==m.lastIndexOf('"',0)?La(m,'"'):0==m.lastIndexOf("'",0)?La(m,"'"):parseFloat(m),h=new uc(j,h[2],m),j=b(j);if(0<=j){var m=c,p=j;var q=c[j];if(q.ja!=h.ja)h=r;else{var v=l,J=l,E=l,H=l;q.a!=r&&q.a.lower!=r&&h.a!=r&&h.a.lower!=r?
q.a.lower>h.a.lower?(v=q.a.lower,E=q.a.lowerOpen):q.a.lower==h.a.lower?(v=q.a.lower,E=q.a.lowerOpen||h.a.lowerOpen):(v=h.a.lower,E=h.a.lowerOpen):q.a!=r&&q.lower!=r?(v=q.a.lower,E=q.a.lowerOpen):h.a!=r&&h.a.lower!=r&&(v=h.a.lower,E=h.a.lowerOpen);q.a!=r&&q.a.lower!=r&&h.a!=r&&h.a.upper!=r?q.a.lower>h.a.upper?(J=q.a.upper,H=q.a.upperOpen):q.a.lower==h.a.lower?(J=q.a.upper,H=q.a.upperOpen||h.a.upperOpen):(J=h.a.upper,H=h.a.upperOpen):q.a!=r&&q.upper!=r?(J=q.a.upper,H=q.a.upperOpen):h.a!=r&&h.upper!=
r&&(J=h.a.upper,H=h.a.upperOpen);h=new uc(q.ja,{lower:v,upper:J,lowerOpen:E,upperOpen:H})}m[p]=h;if(!c[j])return a.Oa='where clause "'+g+'" conflict',r}else c.push(h)}else return a.Oa='Invalid clause "'+g+'"',r}else return a.Oa='Invalid clause "'+g+'"',r}return c}u.toString=function(){return"query:"+this.Q};function cf(a,b){this.sql=b;this.a=a}cf.prototype.toJSON=function(){return{sql:this.sql}};cf.prototype.toString=ba("idb.Node:");
cf.prototype.mc=function(a,b){var c=$a(this.sql.b)[0],d=this.sql.i,e=this.sql.$b,e=isNaN(e)?100:e,f=this.sql.bc,f=isNaN(f)?0:f,g=this.sql.p,h=bf(this.sql),j=r,m=this.sql.Eb;0==d.length?j=r:1==d.length?j=ua(d[0].a):k(new ed("too many conditions."));h===r||0==h.length?g!=r&&g!=this.a.keyPath?(c=new Nc(c,g,j,m),b.ya(a,c,e,f)):j?b.bb(a,c,d[0].ja,j,m,e,f,s):b.Ka(a,c,j,m,e,f):1==h.length?g!=r&&g!=h[0]?(d=new S,c=new Nc(c,g,j,m),b.ya(d,c,e,f),d.O(function(b){b=b.map(function(a){return db(a,h[0])});T(a,b)},
function(b){a.f(b)})):(c=new Lc(c,h[0],j,m),b.ya(a,c,e,f)):(d=new S,b.Ka(d,c,j,m,e,f),d.O(function(a){a.map(function(a){for(var b={},c=0;c<h.length;c++)b[h[c]]=db(a,h[c]);return b})},function(b){a.f(b)}))};function df(a,b){cf.call(this,a,b)}F(df,cf);
df.prototype.mc=function(a,b){var c,d=$a(this.sql.b)[0],e=this.sql.i,f=r;0==e.length?f=r:1==e.length?f=ua(e[0].a):k(new ed("too many conditions."));var g=this.sql.e;if("COUNT"==g)f?b.va(a,d,f,e[0].ja):b.va(a,d,r);else{var h,j=bf(this.sql);(!j||0==j.length)&&k(new W("field name require for reduce operation: "+g));var m=j[0];"MIN"==g?h=function(a,b){var c=a[m];return!x(b)?c:b<c?b:c}:"MAX"==g?h=function(a,b){var c=a[m];return!x(b)?c:b>c?b:c}:"AVG"==g?(c=0,h=function(a,b,c){x(b)||(b=0);return(b*c+a[m])/
(c+1)}):"SUM"==g?(c=0,h=function(a,b){return b+a[m]}):k(new ed(g));var p=Rc(f?new Nc(d,e[0].ja,f):new Mc(d),b);p.W=function(b){a.f(b)};var q=0;p.A=function(b,d,e){x(d)?(c=h(e,c,q),p.advance(1),q++):T(a,c)}}};function ef(a,b){cd.call(this,a,b)}F(ef,Re);ef.prototype.d=P("ydn.db.sql.req.IndexedDb");ef.prototype.executeSql=function(a,b,c){(c=b.parse(c))&&k(new ad(c));c=$a(b.b);if(1==c.length){var d=X(this.a,c[0]);d||k(new Xc(c[0]));var e=bf(b);if(e)for(var f=0;f<e.length;f++)Fe(d,e[f])||k(new Xc('Index "'+e[f]+'" not found in '+c[0]));(b.e?new df(d,b):new cf(d,b)).mc(a,this)}else k(new ed(b.Q))};function ff(a,b){this.sql=b;this.c=a;this.a=bf(b)}ff.prototype.b=P("ydn.db.sql.req.websql.Node");ff.prototype.toJSON=function(){return{sql:this.sql.Q}};ff.prototype.toString=ba("websql.Node:");function gf(a,b){if(a.a){if(1==a.a.length){if(C(b))return db(b,a.a[0]);return}for(var c={},d=0;d<a.a.length;d++)c[a.a[d]]=db(b,a.a[d]);return c}return Pd(b,a.c)}
ff.prototype.nc=function(a,b,c){var d=this,e=[];b.executeSql(this.sql.Q,c,function(b,c){for(var h=c.rows.length,j=0;j<h;j++){var m=c.rows.item(j);if(C(m))var p=gf(d,m);e.push(p)}T(a,e)},function(b,c){M(d.b,"Sqlite error: "+c.message);a.f(c);return n})};function hf(a,b){ff.call(this,a,b)}F(hf,ff);hf.prototype.nc=function(a,b,c){var d=this;b.executeSql(this.sql.Q,c,function(b,c){var d=c.rows.length;1==d?(d=Ve(c.rows.item(0)),T(a,d)):0==d?T(a,l):k(new Uc)},function(b,c){M(d.b,"Sqlite error: "+c.message);a.f(c);return n})};function jf(a,b){cd.call(this,a,b)}F(jf,Te);jf.prototype.d=P("ydn.db.sql.req.WebSql");jf.prototype.executeSql=function(a,b,c){var d=$a(b.b);if(1==d.length){var e=X(this.a,d[0]);e||k(new Xc(d[0]));var f=bf(b);if(f)for(var g=0;g<f.length;g++)Fe(e,f[g])||k(new Xc('Index "'+f[g]+'" not found in '+d[0]));(b.e?new hf(e,b):new ff(e,b)).nc(a,this.h,c)}else k(new ed(b.Q))};function kf(a,b){cd.call(this,a,b)}F(kf,We);function lf(a,b,c){de.call(this,a,b,c)}F(lf,Xe);lf.prototype.executeSql=function(a,b){for(var c=Ec(),d=new Ze(a),e=$a(d.b),f=0;f<e.length;f++){var g=X(this.b,e[f]);g||k(new dd("store: "+g+" not exists."))}var h=this;this.a.k(function(a){h.j(a).executeSql(c,d,b||[])},$a(d.b),d.La,"executeSql");return c};function mf(){this.clear()}u=mf.prototype;u.setItem=function(a,b){x(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};u.getItem=function(a){return this.a[a]||r};u.removeItem=function(a){delete this.a[a];Za(this.keys,a.toString());this.length=this.keys.length};u.length=0;u.key=function(a){a=this.keys[a];return x(a)?this.a[a]:r};u.clear=function(){this.a={};this.keys=[];this.length=0};function nf(a){this.t=a||new mf}u=nf.prototype;u.jc=P("ydn.db.con.SimpleStorage");u.Ib=ba(1);u.Ba=function(a,b){this.wa=a;this.c=b;this.a={};for(var c=0;c<b.stores.length;c++){var d=b.c(c);this.a[d.name]=d.toJSON()}this.indexes={};d=of(this);c=ta(this.t.getItem(d));ge(b);if(c)for(var e in c)c.hasOwnProperty(e)&&!fe(b,e)&&(d=c[e],b.a()?(N(this.jc,"Adding existing store: "+e),this.a[e]=d):(N(this.jc,"Deleting old store: "+e),Md(this,e)));else this.t.setItem(d,G(this.a));return Dc(1)};u.Jb=function(){return!!this.wa};
u.Hb=function(){return this.t||r};u.Ca=ba("memory");u.kb=aa();u.Va=function(a,b,c,d){a(this);d("complete",{})};u.Z=function(a){Id(function(){for(var b=[],c=this.t.getItem(of(this)).stores,d=0;d<c.length;d++){var e=this.t.getItem(of(this,c[d]));b[d]=new Ee(c[d],e.keyPath,e.autoIncrement)}b=new He(this.wa,b);a(b)},0,this)};function of(a,b,c){a=["ydn.db",a.wa];x(b)&&(a.push(b),x(c)&&a.push(ue(c)));return a.join("^|")}
function Ld(a,b,c){b=of(a,b instanceof Ee?b.name:b,c);a=a.t.getItem(b);return a=a===r?l:ta(a)}function Kd(a,b,c,d){var e;e=X(a.c,c);d=x(d)?d:e.keyPath!=r?db(b,e.b):l;x(d)||(e.autoIncrement?(of(a,e.name),d=a.a[e.name],x(d.autoIncrementNo)||(d.autoIncrementNo=a.Za(e.name,r).length),d.autoIncrementNo++,d=d.autoIncrementNo):k(new Tc));e=d;d=of(a,c,e);b=G(b);a.t.setItem(d,b);if(a=a.a[c].Keys){c=0;for(b=a.length;c<b&&e!=a[c];c++)if(e>a[c]){ab(a,c,0,e);break}}return e}
function Md(a,b,c){if(x(c))a.t.removeItem(of(a,b,c)),a=a.a[b].Keys,x(a)&&Za(a,c);else if(x(b)){a.a[b]&&(a.a[b].Keys=r);c=of(a,b)+"^|";for(b=a.t.length-1;0<=b;b--){var d=a.t.key(b);0==d.lastIndexOf(c,0)&&a.t.removeItem(d)}}else{c=of(a)+"^|";for(b=a.t.length-1;0<=b;b--)d=a.t.key(b),0==d.lastIndexOf(c,0)&&a.t.removeItem(d)}}
u.index=function(a){var b=this.a[a],c=b.Keys;if(c==r){c=[];a=of(this,a);a+="^|";for(var d=0,e=this.t.length;d<e;d++){var f=this.t.key(d);if(0==f.lastIndexOf(a,0)){c.push(f);for(var f=0,g=b.indexes.length;f<g;f++);}}Ra.sort.call(c,cb);b.Keys=c;b.indexes={}}return c};
u.Za=function(a,b,c,d,e,f){function g(){return e?function(a){return a>c}:function(a){return a>=c}}function h(){return f?function(a){return a<=d}:function(a){return a<d}}b!=r&&k(new fd);a=this.index(a);if(!x(c)&&!x(d))return a;if(x(c)){if(x(d)){b=Xa(a,h());var j=Xa(a,g());return a.slice(b,j)}b=Xa(a,g());return a.slice(b)}b=Xa(a,h());return a.slice(0,b)};function pf(){nf.call(this,window.localStorage)}F(pf,nf);pf.prototype.Ca=ba("localstorage");function qf(){nf.call(this,window.sessionStorage)}F(qf,nf);qf.prototype.Ca=ba("sessionstorage");var le="created",oe="deleted",ne="updated";function rf(a,b){pd.call(this,a,b)}F(rf,pd);rf.prototype.i=t("e");function sf(a,b,c,d){pd.call(this,a,b);this.version=c;this.kc=d}F(sf,rf);u=sf.prototype;u.name="StorageEvent";u.version=NaN;u.kc=NaN;u.Nc=t("version");u.xc=t("kc");function me(a,b,c,d,e){pd.call(this,a,b);this.e=c;this.key=d;this.value=e}F(me,rf);me.prototype.name="RecordEvent";me.prototype.g=t("key");me.prototype.p=t("value");
function ke(a,b,c,d,e){pd.call(this,a,b);this.e=c;this.keys=d;this.G=e}F(ke,rf);ke.prototype.name="StoreEvent";ke.prototype.Za=t("keys");ke.prototype.g=t("G");function Oe(a,b){He.call(this,a,b)}F(Oe,He);Oe.prototype.a=ba(n);/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");
*/
function Y(a,b,c){ld.call(this);c=c||{};var d=["autoSchema","size","mechanisms","thread"],e;for(e in c)c.hasOwnProperty(e)&&-1==xa(d,e)&&k(new I('Unknown attribute "'+e+'" in options.'));this.yb=c.mechanisms||tf;this.Ja=c.size;this.fc=x(c.fc)?c.fc:s;this.b=r;this.i=[];this.$a=s;if(b instanceof He)e=b;else if(C(b)){e=c.autoSchema||!x(b.stores)?new Oe(b):new He(b);c=0;for(d=b.stores?b.stores.length:0;c<d;c++){var f=X(e,b.stores[c].name);b.stores[c].Sync&&M(this.g,"Synchronization option for "+f.name+
" ignored.")}}else e=new Oe;this.a=e;x(a)&&this.D(a)}F(Y,Gd);Y.prototype.g=P("ydn.db.con.Storage");Y.prototype.yc=function(a){if(x(a)){var b=function(b){a(b.toJSON())};if(this.b)this.b.Z(b);else{var c=this;this.ka(function(a){c.b.Z(b,a)},r,U)}}return this.a?this.a.toJSON():r};
function je(a,b){var c=b instanceof Ee?b:he(b),d=b.name,e=X(a.a,d);0==ie(c,e).length?Dc(s):(e=e?"update":"add",a.a instanceof Oe?(a.a.stores.push(c),a.b?(a.b.kb(),a.b=r,uf(a)):Dc(s)):k(new hd("Cannot "+e+" store: "+d+". Not auto schema generation mode.")))}Y.prototype.D=function(a){this.b&&k(Error("Already defined with "+this.c));this.c=a;uf(this)};D("ydn.db.con.Storage.prototype.setName",Y.prototype.D);Y.prototype.Bb=t("c");var tf=["indexeddb","websql","localstorage","sessionstorage","memory"];
function vf(a,b){return"indexeddb"==b?new Je(a.Ja):"websql"==b?new Me(a.Ja):"localstorage"==b?new pf:"sessionstorage"==b?new qf:"memory"==b?new nf:r}
function uf(a){for(var b=r,c=a.yb,d=0;d<c.length;d++){var e=c[d].toLowerCase();if("indexeddb"==e&&Le){b=vf(a,e);break}else if("websql"==e&&B(w.openDatabase)){b=vf(a,e);break}else if("localstorage"==e&&window.localStorage){b=vf(a,e);break}else if("sessionstorage"==e&&window.sessionStorage){b=vf(a,e);break}else if("memory"==e){b=vf(a,e);break}}b===r&&k(new hd("No storage mechanism found."));b.Ba(a.c,a.a).T(function(c){a.b=b;O(a.g,a+": ready.");a.Mc=NaN;wf(a);Hd(a,new sf("done",a,parseFloat(b.Ib()),
c));b.b=function(){O(a.g,a+": disconnected.")}}).ob(function(b){M(a.g,a+": opening fail: "+b.message);(new S).f(b);if(a.i){a.g.log(Ob,"Purging "+a.i.length+" transactions request.",l);for(var c=a.i.shift();c;)c.B("error",b),c=a.i.shift()}c=new sf("fail",a,NaN,NaN);c.message=b.message;Hd(a,c)})}Y.prototype.p=function(){if(this.b)return this.b.Ca()};D("ydn.db.con.Storage.prototype.getType",Y.prototype.p);Y.prototype.ea=function(){this.b&&(this.b.kb(),this.b=r,O(this.g,this+" closed"))};
D("ydn.db.con.Storage.prototype.close",Y.prototype.ea);u=Y.prototype;u.Lc=function(){return this.b?this.b.Hb():r};u.Mc=NaN;function wf(a){var b=a.i.shift();b&&(O(a.g,"pop tx queue "+b.na.name),Y.prototype.ka.call(a,b.na,b.Cc,b.mode,b.B));oa()}u.$a=s;
u.ka=function(a,b,c,d){var e=b;if(z(b))e=[b];else if(b!=r)if(fa(b)){0==b.length&&k(new I("number of store names must more than 0"));for(var f=0;f<b.length;f++)z(b[f])||k(new I("store name at "+f+" must be string but found "+typeof b[f]))}else k(new I("store names must be an array"));else e=r;if(!this.b||!this.b.Jb()||this.$a)b=a,f=d,O(this.g,"push tx queue "+b.name),this.i.push({na:b,Cc:e,mode:c,B:f}),oa(),100<this.i.length&&0==this.i.length%100&&M(this.g,"Transaction queue stack size is "+this.i.length+
". It is too large, possibility due to incorrect usage.");else{var g=this,h=x(c)?c:U;h==Ic&&(this.$a=n);this.b.Va(function(b){a(b);a=r},e,h,function(a,b){B(d)&&(d(a,b),d=l);h==Ic&&(g.$a=s);wf(g)})}};u.toString=function(){return"ydn.db.con.Storage:"+this.b};function be(a){this.e=a;this.a=r;this.c=0}u=be.prototype;u.nb=P("ydn.db.tr.Mutex");u.hb="";u.ga=r;function xf(a,b,c){if(!a.ga||!a.mode||c!=a.mode||a.ga.length!=b.length)return s;for(c=0;c<b.length;c++)if(-1==a.ga.indexOf(b[c]))return s;return n}u.B=r;u.n=t("a");u.toString=function(){var a;return a="Mutex:"+this.e+":"+this.c+(this.hb?"["+this.hb+"]":"")};function yf(a,b,c){this.a=a;this.e=b;this.la=r;this.c=c||""}u=yf.prototype;u.pc=P("ydn.db.tr.ParallelThread");u.ca=ba(0);u.type=function(){return this.a.p()};u.la=r;u.n=t("la");u.oc=function(){this.la?this.la.abort():k(new id("No active transaction"))};u.fb=function(a,b,c,d){var e=this;O(this.pc,this+" transaction "+c+" open for "+JSON.stringify(b));this.a.ka(function(b){e.la=b;a(e)},b,c,function(a,b){e.la=r;B(d)&&d(a,b)})};
u.k=function(a,b,c,d,e){var f=this;this.a.ka(function(b){f.la=b;a(b);a=r},b,c,function(a,b){f.la=r;B(e)&&(e(a,b),e=r)})};u.toString=function(){var a="ydn.db.tr.ParallelThread:"+this.a.c,b=this.c;return a+":"+this.e+":"+this.ca()+(b?" ["+b+"]":"")};function zf(a,b){ae.call(this,a,b)}F(zf,ae);zf.prototype.k=function(a,b,c,d){c=c||U;var e=this.a;if(e.a&&!e.b&&xf(e,b,c))a(e.n());else{var f=function(){e.a||k(new Uc("Tx not active for scope: "+d));e.b&&k(new Uc("Tx not available for scope: "+d));f.name=d;a(e.n())};this.fb(f,b,c,aa())}};zf.prototype.Wb=function(){var a=this.a,b=0<this.sa.length?this.sa[0].ga:r,c=0<this.sa.length?this.sa[0].mode:r;return!!a&&xf(a,b,c)};function Af(a,b,c){yf.call(this,a,b,c);this.b=s}F(Af,yf);Af.prototype.b=s;Af.prototype.k=function(a,b,c,d,e){var f=this.n();f?a(f):(this.b&&(Wb(this.pc,this+" single thread has already committed the transaction"),k(new Vc)),this.b=n,Af.ha.k.call(this,a,b,c,d,e))};function Bf(a,b,c){Y.call(this,a,b,c);this.Na=0;a="strict-overflow-serial";c&&c.thread&&(a=$d.indexOf(c.thread),-1==a&&k(new dd("thread: "+c.thread)),a=$d[a]);this.da=a;this.e=this.qc(this.da,"base")}F(Bf,Y);u=Bf.prototype;u.Na=0;u.qc=function(a,b){var c=Cf(this,a,b);return this.Ma(c,r)};u.ca=function(){return this.e.ca()};u.Ma=function(a){return new de(this,this.a,a)};
function Cf(a,b,c){b=b||a.da;if("atomic-parallel"==b)return new yf(a,a.Na++,c);if("atomic-serial"==b)return new ce(a,a.Na++);if("strict-overflow-serial"==b)return new zf(a,a.Na++);if("single"==b)return new Af(a,a.Na++,c);k(new dd(b))}
u.Bc=function(a,b,c,d,e){var f=this,g=a.name||"",h=Cf(this,"single",g),j=this.Ma(h,r),m=c||U;-1==[U,Hc].indexOf(m)&&k(new I("invalid mode"));b!=r||(b=ge(this.a));if(fa(b)){0==b.length&&k(new I("number of store names must more than 0"));for(var p=0;p<b.length;p++)z(b[p])||k(new I("store name at "+p+" must be string but found "+typeof b[p]))}else k(new I("store names must be an array"));var q=a;if(4<arguments.length)var v=Array.prototype.slice.call(arguments,4),q=function(){var b=Array.prototype.slice.call(arguments),
b=b.concat(v);return a.apply(this,b)};O(this.g,"scheduling run in transaction "+g+" with "+h);h.k(function(){O(f.g,"executing run in transaction "+g);q(j);q=r},b,m,g,d)};function Z(a,b,c){Bf.call(this,a,b,c)}F(Z,Bf);u=Z.prototype;u.Ma=function(a){return new ee(this,this.a,a)};u.j=function(){var a=this.p();if("indexeddb"==a)return new jd(this.c,this.a);if("websql"==a)return new Nd(this.c,this.a);if("memory"==a||"localstorage"==a||"sessionstorage"==a)return new Jd(this.c,this.a);k(new Uc("No executor for "+a))};u.lb=function(a,b,c){return this.e.lb(a,b,c)};u.Da=function(a,b,c){return this.e.Da(a,b,c)};u.Ea=function(a,b){return this.e.Ea(a,b)};
u.keys=function(a,b,c,d,e,f){return this.e.keys(a,b,c,d,e,f)};u.G=function(a,b,c,d,e,f){return this.e.G(a,b,c,d,e,f)};u.mb=function(a,b,c){return this.e.mb(a,b,c)};u.clear=function(a,b,c){return this.e.clear(a,b,c)};u.toString=function(){return"Storage:"+this.c+":"+this.ca()};function Df(a,b,c){Bf.call(this,a,b,c)}F(Df,Z);u=Df.prototype;u.j=function(){var a=this.p();if("indexeddb"==a)return new Re(this.c,this.a);if("websql"==a)return new Te(this.c,this.a);if("memory"==a||"localstorage"==a||"sessionstorage"==a)return new We(this.c,this.a);k(new Uc("No executor for "+a))};u.Ma=function(a){return new Xe(this,this.a,a)};u.Oc=function(a,b,c){return this.e.Fa(a,b,c)};u.Pc=function(a,b,c){return this.e.lc(a,b,c)};u.map=function(a,b){return this.e.map(a,b)};
u.reduce=function(a,b,c){return this.e.reduce(a,b,c)};function Ef(a,b,c){Bf.call(this,a,b,c)}F(Ef,Df);Ef.prototype.j=function(){var a=this.p();if("indexeddb"==a)return new ef(this.c,this.a);if("websql"==a)return new jf(this.c,this.a);if("memory"==a||"localstorage"==a||"sessionstorage"==a)return new kf(this.c,this.a);k(new Uc("No executor for "+a))};Ef.prototype.Ma=function(a){return new lf(this,this.a,a)};Ef.prototype.executeSql=function(a,b){return this.e.executeSql(a,b)};function Ff(a,b,c){Bf.call(this,a,b,c)}F(Ff,Ef);function Gf(a,b){Pe.call(this,a,b)}F(Gf,Pe);Gf.prototype.b=ba(s);Gf.prototype.c=function(a,b){function c(b){x(a[b])?(e=s,d[b]=n):(d[b]=s,0<=b-1&&c(b-1))}var d=[],e=n;c(a.length-1);e&&(d=[]);var f;a:{f=d;var g,h=g!=r;if(!x(g)){g=b[0];for(var h=g!=r,j=1;h&&j<b.length;j++)if(b[j]==r||0!=R(b[j],g))h=s}if(h&&(this.g++,this.a&&this.a.push(g),x(this.i)&&this.g>=this.i)){f=[];break a}}return f};function Hf(a,b){Pe.call(this,a,b);this.e=a instanceof qe&&!!a.Aa}F(Hf,Pe);Hf.prototype.p=P("ydn.db.algo.ZigzagMerge");Hf.prototype.e=s;Hf.prototype.b=function(a,b){var c=Hf.ha.b.call(this,a,b);if(this.e){var d=a[0].xa().split(", ");1<d.length?d[d.length-1]!=this.a.Aa&&k(new W("Output streamer projection field must be same as postfix field in the iterator")):M(this.p,"Unable to check correctness of output streamer.")}return c};
Hf.prototype.c=function(a,b){function c(a,b){var c=a.slice(0,a.length-1);c.push(b);return c}var d=[];if(0==a.length||a[0]==r||a[0]==r)return[];for(var e=n,f=0,g=a[f][a[f].length-1],h=[],j=1;j<a.length;j++)if(a[j]!=r){var m=a[j][a[j].length-1],p=R(g,m);h[j]=p;1===p?e=s:-1===p&&(e=s,g=m,f=1)}else return[];if(e){for(e=0;e<a.length;e++)a[e]!=r&&(d[e]=n);this.a&&(this.e?this.a.push(b[0],g):this.a.push(b[0]));return d}if(0==f)for(e=1;e<a.length;e++)1===h[e]&&(d[e]=c(a[e],g));else for(e=0;e<a.length;e++)e!=
f&&a[e]!=r&&1===R(g,a[e][a[e].length-1])&&(d[e]=c(a[e],g));return{"continue":d}};function If(a,b){Pe.call(this,a,b)}F(If,Pe);If.prototype.b=ba(s);If.prototype.c=function(a,b){var c=[],d=b[0];if(d==r)return[];for(var e=n,f=s,g=d,h=[],j=1;j<a.length;j++)if(b[j]!=r){var m=R(d,b[j]);h[j]=m;1===m?e=s:-1===m&&(e=s,f=n,1===R(b[j],g)&&(g=b[j]))}else e=s,f=n;if(e)for(f=0;f<a.length;f++)b[f]!=r&&(c[f]=n);else if(f)for(f=0;f<a.length;f++)b[f]!=r&&1===R(g,b[f])&&(c[f]=g);else for(f=1;f<a.length;f++)1===h[f]&&(c[f]=d);return e?(this.g++,this.a&&this.a.push(g),c):{continuePrimary:c}};D("ydn.db.Storage",Ff);D("ydn.db.algo.NestedLoop",Gf);D("ydn.db.algo.ZigzagMerge",Hf);D("ydn.db.algo.SortedMerge",If);S.prototype.done=S.prototype.T;S.prototype.fail=S.prototype.ob;S.prototype.then=S.prototype.O;S.prototype.always=S.prototype.rc;Gd.prototype.addEventListener=Gd.prototype.addEventListener;D("ydn.db.con.Storage",Y);Y.prototype.getType=Y.prototype.p;Y.prototype.setName=Y.prototype.D;Y.prototype.getName=Y.prototype.Bb;Y.prototype.getSchema=Y.prototype.yc;Y.prototype.transaction=Y.prototype.ka;Y.prototype.close=Y.prototype.ea;D("ydn.db.version","0.2.4");
D("ydn.db.deleteDatabase",function(a,b){Le&&((!b||"indexeddb"==b)&&Le&&"deleteDatabase"in Le)&&Le.deleteDatabase(a);if(B(w.openDatabase)&&(!b||"websql"==b)){var c=new Me,d=new Oe,d=c.Ba(a,d),e=function(){c.s.log(Ob,"all tables in "+a+" deleted.",l)};d.T(function(){c.Va(function(b){c.Z(function(d){var e=d.stores.length;if(0<e)for(var f=0;f<e;f++){var p=d.c(f);O(c.s,"deleting table: "+p.name);b.executeSql("DROP TABLE "+Ud(p))}else c.s.log(Ob,"no table to delete in "+a,l)},b)},[],Hc,e)});d.ob(function(){M(c.s,
"Connecting "+a+" failed.")})}if(!b||"localstorage"==b){var d=new pf,f=new Oe;d.Ba(a,f);Md(d)}if(!b||"sessionstorage"==b)d=new qf,f=new Oe,d.Ba(a,f),Md(d)});sf.prototype.name=sf.prototype.name;sf.prototype.getVersion=sf.prototype.Nc;sf.prototype.getOldVersion=sf.prototype.xc;Bf.prototype.run=Bf.prototype.Bc;de.prototype.abort=de.prototype.Qc;D("ydn.db.core.Storage",Z);Z.prototype.thread=Z.prototype.qc;Z.prototype.add=Z.prototype.lb;Z.prototype.get=Z.prototype.Ea;Z.prototype.values=Z.prototype.G;Z.prototype.put=Z.prototype.mb;Z.prototype.clear=Z.prototype.clear;Z.prototype.count=Z.prototype.Da;ee.prototype.add=ee.prototype.lb;ee.prototype.get=ee.prototype.Ea;ee.prototype.values=ee.prototype.G;ee.prototype.put=ee.prototype.mb;ee.prototype.clear=ee.prototype.clear;ee.prototype.count=ee.prototype.Da;D("ydn.db.cmp",R);D("ydn.db.Key",bd);
bd.prototype.id=bd.prototype.wc;bd.prototype.parent=bd.prototype.Jc;bd.prototype.storeName=bd.prototype.Kc;D("ydn.db.KeyRange",pa);pa.upperBound=function(a,b){return new pa(l,a,l,b)};pa.lowerBound=function(a,b){return new pa(a,l,b,l)};pa.bound=ra;pa.only=function(a){return new pa(a,a,s,s)};pa.starts=sa;rf.prototype.store_name=rf.prototype.e;rf.prototype.getStoreName=rf.prototype.i;me.prototype.name=me.prototype.name;me.prototype.getKey=me.prototype.g;me.prototype.getValue=me.prototype.p;
ke.prototype.name=ke.prototype.name;ke.prototype.getKeys=ke.prototype.Za;ke.prototype.getValues=ke.prototype.g;Df.prototype.scan=Df.prototype.Pc;Df.prototype.map=Df.prototype.map;Df.prototype.reduce=Df.prototype.reduce;Df.prototype.open=Df.prototype.Oc;Xe.prototype.Fa.scan=Xe.prototype.lc;Xe.prototype.Fa.map=Xe.prototype.map;Xe.prototype.Fa.reduce=Xe.prototype.reduce;Xe.prototype.Fa.open=Xe.prototype.Fa;se.prototype.key=se.prototype.Lb;Qe.prototype.primaryKey=Qe.prototype.o;Qe.prototype.value=Qe.prototype.aa;Qe.prototype.update=Qe.prototype.Mb;Qe.prototype.clear=Qe.prototype.clear;
Se.prototype.primaryKey=Se.prototype.o;Se.prototype.value=Se.prototype.aa;Se.prototype.update=Se.prototype.Mb;Se.prototype.clear=Se.prototype.clear;D("ydn.math.Expression",Ye);Ye.prototype.evaluate=Ye.prototype.b;Ye.prototype.compile=Ye.prototype.c;Ye.parseRpn=function(a){return new Ye(a.match(/[^\s"']+|"[^"]*"|'[^']*'/g))};Ye.parseInfix=function(){k(new fd("Too lazy to learn Dutch in Shunting Yard station, we speak Polish here."))};D("ydn.db.Iterator",V);D("ydn.db.KeyCursors",Kc);
D("ydn.db.ValueCursors",Mc);D("ydn.db.Cursors",Lc);D("ydn.db.IndexValueCursors",Nc);V.prototype.count=V.prototype.Dc;V.prototype.done=V.prototype.vc;V.prototype.getKeyRange=V.prototype.gc;V.prototype.getIndexName=V.prototype.xa;V.prototype.getStoreName=V.prototype.Fc;V.prototype.isReversed=V.prototype.hc;V.prototype.isUnique=V.prototype.Hc;V.prototype.isKeyOnly=V.prototype.Gc;V.prototype.primaryKey=V.prototype.o;V.prototype.key=V.prototype.Ec;V.prototype.resume=V.prototype.Ac;V.prototype.reset=V.prototype.Ic;
Kc.where=function(a,b,c,d,e){return new Kc(a,za(b,c,d,e))};Mc.where=function(a,b,c,d,e){return new Mc(a,za(b,c,d,e))};Lc.where=function(a,b,c,d,e,f){return new Lc(a,b,za(c,d,e,f))};Nc.where=function(a,b,c,d,e,f){return new Nc(a,b,za(c,d,e,f))};D("ydn.db.Streamer",qe);qe.prototype.push=qe.prototype.push;qe.prototype.collect=qe.prototype.uc;qe.prototype.setSink=qe.prototype.dc;D("ydn.debug.log",function(a,b,c){if(A(b))b=new Ib("log",b);else if(z(b)){b=b.toUpperCase();if(!Ub){Ub={};for(var d=0,e;e=Tb[d];d++)Ub[e.value]=e,Ub[e.name]=e}b=Ub[b]||r}else b=Qb;P(a||"ydn").b=b;x(c)?tc||(a=tc=new rc(c),n!=a.c&&(c=$b(),b=a.g,c.a||(c.a=[]),c.a.push(b),a.c=n),$b().b=Nb):!sc&&!tc&&(a=sc=new ic,n!=a.b&&(c=$b(),b=a.g,c.a||(c.a=[]),c.a.push(b),a.b=n),$b().b=Nb)});Y.prototype.db=Y.prototype.Lc;})();

            //@ sourceMappingURL=zxv-ydn.db-dev.js.map
        

            })(jQuery);
        